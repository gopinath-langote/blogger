function MarkerClusterer(e,t,n){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var r=n||{};this.gridSize_=r.gridSize||60,this.minClusterSize_=r.minimumClusterSize||2,this.maxZoom_=r.maxZoom||null,this.styles_=r.styles||[],this.imagePath_=r.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=r.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,r["zoomOnClick"]!=undefined&&(this.zoomOnClick_=r.zoomOnClick),this.averageCenter_=!1,r["averageCenter"]!=undefined&&(this.averageCenter_=r.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var i=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=i.map_.getZoom();i.prevZoom_!=e&&(i.prevZoom_=e,i.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){i.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,n){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=n||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}function humaneDate(e,t){function u(e,t){var n=.1;return e>=t&&e<=t*(1+n)?t:e}if(!e)return;var n={ago:"Ago",from:"",now:"Just Now",minute:"Minute",minutes:"Minutes",hour:"Hour",hours:"Hours",day:"Day",days:"Days",week:"Week",weeks:"Weeks",month:"Month",months:"Months",year:"Year",years:"Years"},r=[[60,n.now],[3600,n.minute,n.minutes,60],[86400,n.hour,n.hours,3600],[604800,n.day,n.days,86400],[2628e3,n.week,n.weeks,604800],[31536e3,n.month,n.months,2628e3],[Infinity,n.year,n.years,31536e3]],i=typeof e=="string",e=i?new Date((""+e).replace(/-/g,"/").replace(/[TZ]/g," ")):e,t=t||new Date,s=(t-e+(t.getTimezoneOffset()-(i?0:e.getTimezoneOffset()))*6e4)/1e3,o;s<0?(s=Math.abs(s),o=n.from?" "+n.from:""):o=n.ago?" "+n.ago:"";for(var a=0,f=r[0];r[a];f=r[++a])if(s<f[0]){if(a===0)return f[1];var l=Math.ceil(u(s,f[3])/f[3]);return l+" "+(l!=1?f[2]:f[1])+(a>0?o:"")}}(function(e){"use strict";e.fn.fitVids=function(t){var n={customSelector:null,maxAspectRatio:.5625},r=document.createElement("div"),i=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];return r.className="fit-vids-style",r.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>",i.parentNode.insertBefore(r,i),t&&e.extend(n,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.youtube-nocookie.com']","iframe[src*='www.kickstarter.com']","object","embed"];n.customSelector&&t.push(n.customSelector);var r=e(this).find(t.join(","));r.each(function(){var t=e(this);if(this.tagName.toLowerCase()==="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)return;var r=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),i=isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10),s=r/i;s>n.maxAspectRatio&&(s=n.maxAspectRatio);if(!t.attr("id")){var o="fitvid"+Math.floor(Math.random()*999999);t.attr("id",o)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-bottom",s*100+"%"),t.removeAttr("height").removeAttr("width")})})}})(jQuery),function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},t.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||r.compatMode=="BackCompat"?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,s){return typeof i=="object"&&(s=i,i=0),typeof s=="function"&&(s={onAfter:s}),r=="max"&&(r=9e9),s=e.extend({},t.defaults,s),i=i||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(i/=2),s.offset=n(s.offset),s.over=n(s.over),this._scrollable().each(function(){function h(e){u.animate(l,i,s.easing,e&&function(){e.call(this,r,s)})}if(r==null)return;var o=this,u=e(o),a=r,f,l={},c=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);if(!a.length)return;case"object":if(a.is||a.style)f=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),p="scroll"+r,d=o[p],v=t.max(o,n);if(f)l[p]=f[i]+(c?0:d-u.offset()[i]),s.margin&&(l[p]-=parseInt(a.css("margin"+r))||0,l[p]-=parseInt(a.css("border"+r+"Width"))||0),l[p]+=s.offset[i]||0,s.over[i]&&(l[p]+=a[n=="x"?"width":"height"]()*s.over[i]);else{var m=a[i];l[p]=m.slice&&m.slice(-1)=="%"?parseFloat(m)/100*v:m}s.limit&&/^\d+$/.test(l[p])&&(l[p]=l[p]<=0?0:Math.min(l[p],v)),!e&&s.queue&&(d!=l[p]&&h(s.onAfterFirst),delete l[p])}),h(s.onAfter)}).end()},t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math.max(o[i],u[i])-Math.min(o[s],u[s])}}(jQuery),function($){$.extend({__stringPrototype:function(str){function makeRegExpGlobal(e){if(!e.source)return e;var t="g"+(e.ignoreCase?"i":"")+(e.multiline?"m":"");return new RegExp(e.source,t)}var splitCheck="a b".split(/\w/)[0]==" ";this.str=str,this.JSONFilter=/^\/\*-secure-([\s\S]*)\*\/\s*$/,this.ScriptFragment="<script[^>]*>([\\S\\s]*?)</script>",this.specialChar={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"},this.blank=function(e){return/^\s*$/.test(this.s(e)||" ")},this.camelize=function(e){var t=this.s(e).split("-"),n;e=[t[0]];for(n=1;n<t.length;n++)e.push(t[n].charAt(0).toUpperCase()+t[n].substring(1));return this.str=e.join(""),this},this.capitalize=function(e){return e=this.s(e),this.str=e.charAt(0).toUpperCase()+e.substring(1).toLowerCase(),this},this.dasherize=function(e){return this.str=this.s(e).split("_").join("-"),this},this.empty=function(e){return e?e=="":this.str==""},this.endsWith=function(e,t){t=this.s(t);var n=t.length-e.length;return n>=0&&t.lastIndexOf(e)===n},this.escapeHTML=function(e){return this.str=this.s(e).split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"),this},this.evalJSON=function(sanitize,s){s=this.s(s);var json=this.unfilterJSON(!1,s).str;try{if(!sanitize||this.isJSON(json))return eval("("+json+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+s)},this.evalScripts=function(s){var scriptTags=this.extractScripts(this.s(s)),results=[];if(scriptTags.length>0)for(var i=0;i<scriptTags.length;i++)results.push(eval(scriptTags[i]));return results},this.extractScripts=function(e){var t=new RegExp(this.ScriptFragment,"img"),n=new RegExp(this.ScriptFragment,"im"),r=this.s(e).match(t)||[],i=[];if(r.length>0)for(var s=0;s<r.length;s++)i.push(r[s].match(n)[1]||"");return i},this.gsub=function(e,t,n){n=this.s(n);if($.isFunction(t)){var r=n.match(makeRegExpGlobal(e));if(r==null)return this;n=this.sub(e,t,r.length,n).str}else n=n.split(e).join(t);return this.str=n,this},this.include=function(e,t){return this.s(t).indexOf(e)>-1},this.inspect=function(e,t){t=this.s(t);var n=this.specialChar,r=this.gsub(/[\x00-\x1f\\]/,function(e){var t=n[e[0]];return t?t:"\\u00"+e[0].charCodeAt().toPaddedString(2,16)},t).str;return this.str=e?'"'+r.replace(/"/g,'\\"')+'"':"'"+r.replace(/'/g,"\\'")+"'",this},this.interpolate=function(e,t,n){n=this.s(n),t||(t=/(^|.|\r|\n)(\#\{\s*(\w+)\s*\})/);var r=0,i=n.length,s;while(t.match(n)&&r++<i)s=t.exec(n),n=this.gsub(s[2],e[s[3]],n).str;return this.str=n,this},this.isJSON=function(e){return e=this.s(e),this.blank(e)?!1:(e=e.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(e))},this.scan=function(e,t,n){return n=this.s(n),this.gsub(e,t,n).str=n,this},this.startsWith=function(e,t){return this.s(t).indexOf(e)===0},this.strip=function(e){return this.str=$.trim(this.s(e)),this},this.stripScripts=function(e){return this.str=this.s(e).replace(new RegExp(this.ScriptFragment,"img"),""),this},this.stripTags=function(e){return this.str=this.s(e).replace(/<\/?[^>]+>/gi,""),this},this.sub=function(e,t,n,r){r=this.s(r),n=n?n:1;if(n<0||isNaN(n))return this;e=makeRegExpGlobal(e);var i=r.split(e),s=r.match(e);splitCheck&&typeof e=="object"&&(n==s.length&&++n,r.indexOf(s[0])==0&&i.unshift(""),r.lastIndexOf(s[s.length-1])==r.length-s[s.length-1].length&&i.push("")),r=i[0];for(var o=1;o<i.length;o++)o<=n?$.isFunction(t)?r+=t(s[o-1]||s)+i[o]:r+=t+i[o]:r+=(s[o-1]||s)+i[o];return this.str=r,this},this.succ=function(e){return e=this.s(e),this.str=e.slice(0,e.length-1)+String.fromCharCode(e.charCodeAt(e.length-1)+1),this},this.times=function(e,t){return this.str=e<1?"":(new Array(e+1)).join(this.s(t)),this},this.toJSON=function(e){return this.inspect(!0,this.s(e))},this.toQueryParams=function(e,t){t=this.s(t);var n=t.substring(t.indexOf("?")+1).split("#")[0].split(e||"&"),r={},i,s,o,u;for(i=0;i<n.length;i++)u=n[i].split("="),s=decodeURIComponent(u[0]),o=u[1]?decodeURIComponent(u[1]):undefined,r[s]?(typeof r[s]=="string"&&(r[s]=[r[s]]),r[s].push(o)):r[s]=o;return r},this.truncate=function(e,t,n){return n=this.s(n),e=e||30,t=t?t:"...",n=n.length>e?n.slice(0,e-t.length)+t:String(n),this.str=n,this},this.underscore=function(e){return this.gsub(/[A-Z]/,function(e){return"_"+e.toLowerCase()},this.s(e)),this.str.substring(0,1)=="_"&&(this.str=this.str.substring(1)),this},this.unescapeHTML=function(e){return this.str=this.stripTags(this.s(e)).str.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),this},this.unfilterJSON=function(e,t){t=this.s(t),e=e||this.JSONFilter;var n=t.match(e);return this.str=n!==null?n[1]:t,this},this.value=function(){return this.str},this.s=function(e){return e?e:this.str}},string:function(e){if(e!==String.prototype)return new $.__stringPrototype(e);$.extend(String.prototype,new $.__stringPrototype)}}),$.__stringPrototype.parseQuery=$.__stringPrototype.toQueryParams}(jQuery),function(e){var t=e.event,n,r={_:0},i=0,s,o;n=t.special.throttledresize={setup:function(){e(this).on("resize",n.handler)},teardown:function(){e(this).off("resize",n.handler)},handler:function(u,a){var f=this,l=arguments;s=!0,o||(setInterval(function(){i++;if(i>n.threshold&&s||a)u.type="throttledresize",t.dispatch.apply(f,l),s=!1,i=0;i>9&&(e(r).stop(),o=!1,i=0)},30),o=!0)},threshold:0}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){e=1.70158;var s=0,o=r;return t==0?n:(t/=i)==1?n+r:(s||(s=i*.3),o<Math.abs(r)?(o=r,e=s/4):e=s/(2*Math.PI)*Math.asin(r/o),-(o*Math.pow(2,10*(t-=1))*Math.sin((t*i-e)*2*Math.PI/s))+n)},easeOutElastic:function(e,t,n,r,i){e=1.70158;var s=0,o=r;return t==0?n:(t/=i)==1?n+r:(s||(s=i*.3),o<Math.abs(r)?(o=r,e=s/4):e=s/(2*Math.PI)*Math.asin(r/o),o*Math.pow(2,-10*t)*Math.sin((t*i-e)*2*Math.PI/s)+r+n)},easeInOutElastic:function(e,t,n,r,i){e=1.70158;var s=0,o=r;return t==0?n:(t/=i/2)==2?n+r:(s||(s=i*.3*1.5),o<Math.abs(r)?(o=r,e=s/4):e=s/(2*Math.PI)*Math.asin(r/o),t<1?-0.5*o*Math.pow(2,10*(t-=1))*Math.sin((t*i-e)*2*Math.PI/s)+n:o*Math.pow(2,-10*(t-=1))*Math.sin((t*i-e)*2*Math.PI/s)*.5+r+n)},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t
.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n));for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"):this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}),this.range.addClass(n+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;t==="range"&&this.options.range===!0&&(n==="min"?(this.options.value=this._values(0),this.options.values=null):n==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;if(this.options.values&&this.options.values.length){n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),!function(e,t,n){function r(e,t){return typeof e===t}function i(){var e,t,n,i,s,o,u;for(var a in b){if(e=[],t=b[a],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=r(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)o=e[s],u=o.split("."),1===u.length?E[u[0]]=i:(!E[u[0]]||E[u[0]]instanceof Boolean||(E[u[0]]=new Boolean(E[u[0]])),E[u[0]][u[1]]=i),y.push((i?"":"no-")+u.join("-"))}}function s(e){var t=S.className,n=E._config.classPrefix||"";if(x&&(t=t.baseVal),E._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}E._config.enableClasses&&(t+=" "+n+e.join(" "+n),x?S.className.baseVal=t:S.className=t)}function o(e,t){return function(){return e.apply(t,arguments)}}function u(e,t,n){var i;for(var s in e)if(e[s]in t)return n===!1?e[s]:(i=t[e[s]],r(i,"function")?o(i,n||t):i);return!1}function a(e,t){return!!~(""+e).indexOf(t)}function f(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function l(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):x?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function c(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(){var e=t.body;return e||(e=l(x?"svg":"body"),e.fake=!0),e}function p(e,n,r,i){var s,o,u,a,f="modernizr",c=l("div"),p=h();if(parseInt(r,10))for(;r--;)u=l("div"),u.id=i?i[r]:f+(r+1),c.appendChild(u);return s=l("style"),s.type="text/css",s.id="s"+f,(p.fake?p:c).appendChild(s),p.appendChild(c),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(t.createTextNode(e)),c.id=f,p.fake&&(p.style.background="",p.style.overflow="hidden",a=S.style.overflow,S.style.overflow="hidden",S.appendChild(p)),o=n(c,e),p.fake?(p.parentNode.removeChild(p),S.style.overflow=a,S.offsetHeight):c.parentNode.removeChild(c),!!o}function d(t,r){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(c(t[i]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];i--;)s.push("("+c(t[i])+":"+r+")");return s=s.join(" or "),p("@supports ("+s+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function v(e,t,i,s){function o(){c&&(delete L.style,delete L.modElem)}if(s=r(s,"undefined")?!1:s,!r(i,"undefined")){var u=d(e,i);if(!r(u,"undefined"))return u}for(var c,h,p,v,m,g=["modernizr","tspan"];!L.style;)c=!0,L.modElem=l(g.shift()),L.style=L.modElem.style;for(p=e.length,h=0;p>h;h++)if(v=e[h],m=L.style[v],a(v,"-")&&(v=f(v)),L.style[v]!==n){if(s||r(i,"undefined"))return o(),"pfx"==t?v:!0;try{L.style[v]=i}catch(y){}if(L.style[v]!=m)return o(),"pfx"==t?v:!0}return o(),!1}function m(e,t,n,i,s){var o=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+C.join(o+" ")+o).split(" ");return r(t,"string")||r(t,"undefined")?v(a,t,i,s):(a=(e+" "+N.join(o+" ")+o).split(" "),u(a,t,n))}function g(e,t,r){return m(e,n,n,t,r)}var y=[],b=[],w={_version:"3.0.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){b.push({name:e,fn:t,options:n})},addAsyncTest:function(e){b.push({name:null,fn:e})}},E=function(){};E.prototype=w,E=new E,E.addTest("history",function(){var t=navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")?e.history&&"pushState"in e.history:!1});var S=t.documentElement,x="svg"===S.nodeName.toLowerCase(),T="Moz O ms Webkit",N=w._config.usePrefixes?T.toLowerCase().split(" "):[];w._domPrefixes=N;var C=w._config.usePrefixes?T.split(" "):[];w._cssomPrefixes=C;var k={elem:l("modernizr")};E._q.push(function(){delete k.elem});var L={style:k.elem.style};E._q.unshift(function(){delete L.style}),w.testAllProps=m,w.testAllProps=g,E.addTest("flexbox",g("flexBasis","1px",!0)),i(),s(y),delete w.addTest,delete w.addAsyncTest;for(var A=0;A<E._q.length;A++)E._q[A]();e.Modernizr=E}(window,document),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this
.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),Backbone.GoogleMaps=function(e,t,n){var r={};return r.Location=e.Model.extend({constructor:function(){t.bindAll(this,"select","deselect","toggleSelect","getLatlng"),this.defaults=t.extend({},{lat:0,lng:0,selected:!1,title:""},this.defaults),e.Model.prototype.constructor.apply(this,arguments)},select:function(){this.get("selected")||(this.set("selected",!0),this.trigger("selected",this),e.Events.trigger("location:selected",this))},deselect:function(){this.get("selected")&&(this.set("selected",!1),this.trigger("deselected",this),e.Events.trigger("location:deselected",this))},toggleSelect:function(){this.get("selected")?this.deselect():this.select()},getLatlng:function(){return new google.maps.LatLng(this.get("lat"),this.get("lng"))}}),r.LocationCollection=e.Collection.extend({model:r.Location,constructor:function(){e.Collection.prototype.constructor.apply(this,arguments),e.Events.on("location:selected",function(e){this.each(function(t){e.cid!==t.cid&&t.deselect()})},this)}}),r.MapView=e.View.extend({mapEvents:{},overlayOptions:{},constructor:function(){e.View.prototype.constructor.apply(this,arguments);if(!google||!google.maps)throw new Error("Google maps API is not loaded.");if(!this.options.map&&!this.map)throw new Error("A map must be specified.");this.gOverlay=this.map=this.options.map||this.map,this.overlayOptions||(this.overlayOptions=this.options.overlayOptions)},bindMapEvents:function(e){e||(e=this.mapEvents);for(event in this.mapEvents){var t=this.mapEvents[event];google.maps.event.addListener(this.gOverlay,event,this[t])}},render:function(){return this.beforeRender&&this.beforeRender(),this.bindMapEvents(),this.onRender&&this.onRender(),this},close:function(){this.beforeClose&&this.beforeClose(),google.maps.event.clearInstanceListeners(this.gOverlay),this.gOverlay.setMap&&this.gOverlay.setMap(null),this.gOverlay=null,this.onClose&&this.onClose()}}),r.InfoWindow=r.MapView.extend({constructor:function(){r.MapView.prototype.constructor.apply(this,arguments),t.bindAll(this,"render","close");if(!this.options.marker&&!this.marker)throw new Error("A marker must be specified for InfoWindow view.");this.marker=this.options.marker||this.marker,this.template=this.template||this.options.template},render:function(){this.beforeRender&&this.beforeRender(),r.MapView.prototype.render.apply(this,arguments);var e=this.template?n(this.template).html():"<h2><%=title %></h2>";return this.$el.html(t.template(e,this.model.toJSON())),this.gOverlay=new google.maps.InfoWindow(t.extend({content:this.$el[0]},this.overlayOptions)),this.gOverlay.open(this.map,this.marker),this.onRender&&this.onRender(),this},close:function(){return this.beforeClose&&this.beforeClose(),r.MapView.prototype.close.apply(this,arguments),this.onClose&&this.onClose(),this}}),r.MarkerView=r.MapView.extend({infoWindow:r.InfoWindow,constructor:function(){r.MapView.prototype.constructor.apply(this,arguments),t.bindAll(this,"render","close","openDetail","closeDetail","toggleSelect");if(!this.model)throw new Error("A model must be specified for a MarkerView");this.gOverlay=new google.maps.Marker(t.extend({position:this.model.getLatlng(),map:this.map,title:this.model.title,animation:google.maps.Animation.DROP,visible:!1},this.overlayOptions)),t.extend(this.mapEvents,{click:"toggleSelect"}),this.model.on("selected",this.openDetail,this),this.model.on("deselected",this.closeDetail,this)},toggleSelect:function(){this.model.toggleSelect()},render:function(){return this.beforeRender&&this.beforeRender(),r.MapView.prototype.render.apply(this,arguments),this.gOverlay.setVisible(!0),this.onRender&&this.onRender(),this},close:function(){return this.beforeClose&&this.beforeClose(),this.closeDetail(),r.MapView.prototype.close.apply(this,arguments),this.model.off(),this.onClose&&this.onClose(),this},openDetail:function(){this.detailView=new this.infoWindow({model:this.model,map:this.map,marker:this.gOverlay}),this.detailView.render()},closeDetail:function(){this.detailView&&(this.detailView.close(),this.detailView=null)}}),r.MarkerCollectionView=e.View.extend({markerView:r.MarkerView,markerViewChildren:{},constructor:function(){e.View.prototype.constructor.apply(this,arguments),t.bindAll(this,"render","closeChildren","closeChild","addChild","refresh","close");if(!this.options.map&&!this.map)throw new Error("A map must be specified on MarkerCollectionView instantiation");this.map||(this.map=this.options.map),this.collection.on("reset",this.refresh,this),this.collection.on("add",this.addChild,this),this.collection.on("remove",this.closeChild,this)},render:function(e){var e=e||this.collection;return this.beforeRender&&this.beforeRender(),e.each(this.addChild),this.onRender&&this.onRender(),this},closeChildren:function(){for(cid in this.markerViewChildren)this.closeChild(this.markerViewChildren[cid])},closeChild:function(t){var n=t instanceof e.Model?this.markerViewChildren[t.cid]:t;n.close(),delete this.markerViewChildren[n.model.cid]},addChild:function(e){var t=new this.markerView({model:e,map:this.map});this.markerViewChildren[e.cid]=t,t.render()},refresh:function(){this.closeChildren(),this.render()},close:function(){this.closeChildren(),this.collection.off()}}),r}(Backbone,_,window.jQuery||window.Zepto||window.ender),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(this.styles_.length)return;for(var e=0,t;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},MarkerClusterer.prototype.fitMapToMarkers=function(){var e=this.getMarkers(),t=new google.maps.LatLngBounds;for(var n=0,r;r=e[n];n++)t.extend(r.getPosition());this.map_.fitBounds(t)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){var n=0,r=e.length,i=r;while(i!==0)i=parseInt(i/10,10),n++;return n=Math.min(n,t),{text:r,index:n}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){for(var n=0,r;r=e[n];n++)this.pushMarkerTo_(r);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){e.isAdded=!1;if(e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var n=0,r;r=this.markers_[n];n++)if(r==e){t=n;break}return t==-1?!1:(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n?(this.resetViewport(),this.redraw(),!0):!1},MarkerClusterer.prototype.removeMarkers=function(e,t){var n=!1;for(var r=0,i;i=e[r];r++){var s=this.removeMarker_(i);n=n||s}if(!t&&n)return this.resetViewport(),this.redraw(),!0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),r=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),i=t.fromLatLngToDivPixel(n);i.x+=this.gridSize_,i.y-=this.gridSize_;var s=t.fromLatLngToDivPixel(r);s.x-=this.gridSize_,s.y+=this.gridSize_;var o=t.fromDivPixelToLatLng(i),u=t.fromDivPixelToLatLng(s);return e.extend(o),e.extend(u),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t=0,n;n=this.clusters_[t];t++)n.remove();for(var t=0,r;r=this.markers_[t];t++)r.isAdded=!1,e&&r.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t=0,n;n=e[t];t++)n.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var n=6371,r=(t.lat()-e.lat())*Math.PI/180,i=(t.lng()-e.lng())*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),o=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),u=n*o;return u},MarkerClusterer.prototype.addToClosestCluster_=function(e){var t=4e4,n=null,r=e.getPosition();for(var i=0,s;s=this.clusters_[i];i++){var o=s.getCenter();if(o){var u=this.distanceBetweenPoints_(o,e.getPosition());u<t&&(t=u,n=s)}}if(n&&n.isMarkerInClusterBounds(e))n.addMarker(e);else{var s=new Cluster(this);s.addMarker(e),this.clusters_.push(s)}},MarkerClusterer.prototype.createClusters_=function(){if(!this.ready_)return;var e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),t=this.getExtendedBounds(e);for(var n=0,r;r=this.markers_[n];n++)!r.isAdded&&this.isMarkerInBounds_(r,t)&&this.addToClosestCluster_(r)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return this.markers_.indexOf(e)!=-1;for(var t=0,n;n=this.markers_[t];t++)if(n==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(!this.center_)this.center_=e.getPosition(),this.calculateBounds_();else if(this.averageCenter_){var t=this.markers_.length+1,n=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,r=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(n,r),this.calculateBounds_()}e.isAdded=!0,this.markers_.push(e);var i=this.markers_.length;i<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_);if(i==this.minClusterSize_)for(var s=0;s<i;s++)this.markers_[s].setMap(null);return i>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_),t=this.getMarkers();for(var n=0,r;r=t[n];n++)e.extend(r.getPosition());return e},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t){for(var n=0,r;r=this.markers_[n];n++)r.setMap(this.map_);return}if(this.markers_.length<this.minClusterSize_){this.clusterIcon_.hide();return}var i=this.markerClusterer_.getStyles().length,s=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(s),this.clusterIcon_.show()},ClusterIcon.prototype.triggerClusterClick=function(){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement("DIV");if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}var t=this.getPanes();t.overlayMouseTarget.appendChild(this.div_);var n=this;google.maps.event.addDomListener(this.div_,"click",function(){n.triggerClusterClick()})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+n+";"),typeof this.anchor_=="object"?(typeof this.anchor_[0]=="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),typeof this.anchor_[1]=="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var r=this.textColor_?this.textColor_:"black",i=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+r+"; position:absolute; font-size:"+i+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype
.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,function(e,t){function o(e){return!!(e===""||e&&e.charCodeAt&&e.substr)}function u(e){return i?i(e):s.call(e)==="[object Array]"}function a(e){return e&&s.call(e)==="[object Object]"}function f(e,t){var n;e=e||{},t=t||{};for(n in t)t.hasOwnProperty(n)&&e[n]==null&&(e[n]=t[n]);return e}function l(e,t,n){var i=[],s,o;if(!e)return i;if(r&&e.map===r)return e.map(t,n);for(s=0,o=e.length;s<o;s++)i[s]=t.call(n,e[s],s,e);return i}function c(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function h(e){var t=n.settings.currency.format;return typeof e=="function"&&(e=e()),o(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:!e||!e.pos||!e.pos.match("%v")?o(t)?n.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t:e}var n={};n.version="0.3.2",n.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var r=Array.prototype.map,i=Array.isArray,s=Object.prototype.toString,p=n.unformat=n.parse=function(e,t){if(u(e))return l(e,function(e){return p(e,t)});e=e||0;if(typeof e=="number")return e;t=t||n.settings.number.decimal;var r=new RegExp("[^0-9-"+t+"]",["g"]),i=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(r,"").replace(t,"."));return isNaN(i)?0:i},d=n.toFixed=function(e,t){t=c(t,n.settings.number.precision);var r=Math.pow(10,t);return(Math.round(n.unformat(e)*r)/r).toFixed(t)},v=n.formatNumber=function(e,t,r,i){if(u(e))return l(e,function(e){return v(e,t,r,i)});e=p(e);var s=f(a(t)?t:{precision:t,thousand:r,decimal:i},n.settings.number),o=c(s.precision),h=e<0?"-":"",m=parseInt(d(Math.abs(e||0),o),10)+"",g=m.length>3?m.length%3:0;return h+(g?m.substr(0,g)+s.thousand:"")+m.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+s.thousand)+(o?s.decimal+d(Math.abs(e),o).split(".")[1]:"")},m=n.formatMoney=function(e,t,r,i,s,o){if(u(e))return l(e,function(e){return m(e,t,r,i,s,o)});e=p(e);var d=f(a(t)?t:{symbol:t,precision:r,thousand:i,decimal:s,format:o},n.settings.currency),g=h(d.format),y=e>0?g.pos:e<0?g.neg:g.zero;return y.replace("%s",d.symbol).replace("%v",v(Math.abs(e),c(d.precision),d.thousand,d.decimal))};n.formatColumn=function(e,t,r,i,s,d){if(!e)return[];var m=f(a(t)?t:{symbol:t,precision:r,thousand:i,decimal:s,format:d},n.settings.currency),g=h(m.format),y=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,b=0,w=l(e,function(e,t){if(u(e))return n.formatColumn(e,m);e=p(e);var r=e>0?g.pos:e<0?g.neg:g.zero,i=r.replace("%s",m.symbol).replace("%v",v(Math.abs(e),c(m.precision),m.thousand,m.decimal));return i.length>b&&(b=i.length),i});return l(w,function(e,t){return o(e)&&e.length<b?y?e.replace(m.symbol,m.symbol+(new Array(b-e.length+1)).join(" ")):(new Array(b-e.length+1)).join(" ")+e:e})},typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports.accounting=n):typeof define=="function"&&define.amd?define([],function(){return n}):(n.noConflict=function(r){return function(){return e.accounting=r,n.noConflict=t,n}}(e.accounting),e.accounting=n)}(this),function(e,t){var n=function(e){return new o(e)};n.version="0.1.3";var r=e.fxSetup||{rates:{},base:""};n.rates=r.rates,n.base=r.base,n.settings={from:r.from||n.base,to:r.to||n.base};var i=n.convert=function(e,t){if(typeof e=="object"&&e.length){for(var r=0;r<e.length;r++)e[r]=i(e[r],t);return e}return t=t||{},t.from||(t.from=n.settings.from),t.to||(t.to=n.settings.to),e*s(t.to,t.from)},s=function(e,t){var r=n.rates;r[n.base]=1;if(!r[e]||!r[t])throw"fx error";return t===n.base?r[e]:e===n.base?1/r[t]:r[e]*(1/r[t])},o=function(e){typeof e=="string"?(this._v=parseFloat(e.replace(/[^0-9-.]/g,"")),this._fx=e.replace(/([^A-Za-z])/g,"")):this._v=e},u=n.prototype=o.prototype;u.convert=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this._v),i.apply(n,e)},u.from=function(e){var t=n(i(this._v,{from:e,to:n.base}));return t._fx=n.base,t},u.to=function(e){return i(this._v,{from:this._fx?this._fx:n.settings.from,to:e})},typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports.fx=n):typeof define=="function"&&define.amd?define([],function(){return n}):(n.noConflict=function(r){return function(){return e.fx=r,n.noConflict=t,n}}(e.fx),e.fx=n)}(this),typeof jQuery!="undefined"&&(jQuery.humaneDate=humaneDate,jQuery.fn.humaneDates=function(e){var t=jQuery.extend({lowercase:!1},e);return this.each(function(){var e=jQuery(this),n=e.attr("datetime")||e.attr("title");n=humaneDate(n),n&&t.lowercase&&(n=n.toLowerCase()),n&&e.html()!=n&&e.html(n)})}),function(){var e,t={}.hasOwnProperty,n=[].slice;if(((e=this["google"])!=null?e["maps"]:void 0)==null)return;this.OverlappingMarkerSpiderfier=function(){function p(n,r){var i,s,o,u,a,f,l=this;this.map=n,r==null&&(r={});for(s in r){if(!t.call(r,s))continue;o=r[s],this[s]=o}this.projHelper=new this.constructor.ProjHelper(this.map),this.initMarkerArrays(),this.listeners={},f=["click","zoom_changed","maptypeid_changed"];for(u=0,a=f.length;u<a;u++)i=f[u],e.addListener(this.map,i,function(){return l.unspiderfy()})}var e,r,i,s,o,u,a,f,l,c,h;u=p.prototype,h=[p,u];for(l=0,c=h.length;l<c;l++)f=h[l],f.VERSION="0.3.3";return r=google.maps,e=r.event,o=r.MapTypeId,a=Math.PI*2,u.keepSpiderfied=!1,u.markersWontHide=!1,u.markersWontMove=!1,u.nearbyDistance=20,u.circleSpiralSwitchover=9,u.circleFootSeparation=23,u.circleStartAngle=a/12,u.spiralFootSeparation=26,u.spiralLengthStart=11,u.spiralLengthFactor=4,u.spiderfiedZIndex=1e3,u.usualLegZIndex=10,u.highlightedLegZIndex=20,u.legWeight=1.5,u.legColors={usual:{},highlighted:{}},s=u.legColors.usual,i=u.legColors.highlighted,s[o.HYBRID]=s[o.SATELLITE]="#fff",i[o.HYBRID]=i[o.SATELLITE]="#f00",s[o.TERRAIN]=s[o.ROADMAP]="#444",i[o.TERRAIN]=i[o.ROADMAP]="#f00",u.initMarkerArrays=function(){return this.markers=[],this.markerListenerRefs=[]},u.addMarker=function(t){var n,r=this;return t["_oms"]!=null?this:(t._oms=!0,n=[e.addListener(t,"click",function(e){return r.spiderListener(t,e)})],this.markersWontHide||n.push(e.addListener(t,"visible_changed",function(){return r.markerChangeListener(t,!1)})),this.markersWontMove||n.push(e.addListener(t,"position_changed",function(){return r.markerChangeListener(t,!0)})),this.markerListenerRefs.push(n),this.markers.push(t),this)},u.markerChangeListener=function(e,t){if(e["_omsData"]!=null&&(t||!e.getVisible())&&this.spiderfying==null&&this.unspiderfying==null)return this.unspiderfy(t?e:null)},u.getMarkers=function(){return this.markers.slice(0)},u.removeMarker=function(t){var n,r,i,s,o;t["_omsData"]!=null&&this.unspiderfy(),n=this.arrIndexOf(this.markers,t);if(n<0)return this;i=this.markerListenerRefs.splice(n,1)[0];for(s=0,o=i.length;s<o;s++)r=i[s],e.removeListener(r);return delete t._oms,this.markers.splice(n,1),this},u.clearMarkers=function(){var t,n,r,i,s,o,u,a,f;this.unspiderfy(),f=this.markers;for(t=s=0,u=f.length;s<u;t=++s){i=f[t],r=this.markerListenerRefs[t];for(o=0,a=r.length;o<a;o++)n=r[o],e.removeListener(n);delete i._oms}return this.initMarkerArrays(),this},u.addListener=function(e,t){var n,r;return((r=(n=this.listeners)[e])!=null?r:n[e]=[]).push(t),this},u.removeListener=function(e,t){var n;return n=this.arrIndexOf(this.listeners[e],t),n<0||this.listeners[e].splice(n,1),this},u.clearListeners=function(e){return this.listeners[e]=[],this},u.trigger=function(){var e,t,r,i,s,o,u,a;t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],u=(o=this.listeners[t])!=null?o:[],a=[];for(i=0,s=u.length;i<s;i++)r=u[i],a.push(r.apply(null,e));return a},u.generatePtsCircle=function(e,t){var n,i,s,o,u,f,l;s=this.circleFootSeparation*(2+e),u=s/a,i=a/e,l=[];for(o=f=0;0<=e?f<e:f>e;o=0<=e?++f:--f)n=this.circleStartAngle+o*i,l.push(new r.Point(t.x+u*Math.cos(n),t.y+u*Math.sin(n)));return l},u.generatePtsSpiral=function(e,t){var n,i,s,o,u,f;s=this.spiralLengthStart,n=0,f=[];for(i=u=0;0<=e?u<e:u>e;i=0<=e?++u:--u)n+=this.spiralFootSeparation/s+i*5e-4,o=new r.Point(t.x+s*Math.cos(n),t.y+s*Math.sin(n)),s+=a*this.spiralLengthFactor/n,f.push(o);return f},u.spiderListener=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;s=e["_omsData"]!=null,(!s||!this.keepSpiderfied)&&this.unspiderfy();if(s||this.map.getStreetView().getVisible()||this.map.getMapTypeId()==="GoogleEarthAPI")return this.trigger("click",e,t);u=[],a=[],o=this.nearbyDistance,f=o*o,i=this.llToPt(e.position),h=this.markers;for(l=0,c=h.length;l<c;l++){n=h[l];if(n.map==null||!n.getVisible())continue;r=this.llToPt(n.position),this.ptDistanceSq(r,i)<f?u.push({marker:n,markerPt:r}):a.push(n)}return u.length===1?this.trigger("click",e,t):this.spiderfy(u,a)},u.markersNearMarker=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;t==null&&(t=!1);if(this.projHelper.getProjection()==null)throw"Must wait for 'idle' event on map before calling markersNearMarker";o=this.nearbyDistance,u=o*o,i=this.llToPt(e.position),s=[],l=this.markers;for(a=0,f=l.length;a<f;a++){n=l[a];if(n===e||n.map==null||!n.getVisible())continue;r=this.llToPt((c=(h=n["_omsData"])!=null?h.usualPosition:void 0)!=null?c:n.position);if(this.ptDistanceSq(r,i)<u){s.push(n);if(t)break}}return s},u.markersNearAnyOtherMarker=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;if(this.projHelper.getProjection()==null)throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";f=this.nearbyDistance,l=f*f,a=function(){var e,t,n,i,s,o;n=this.markers,o=[];for(e=0,t=n.length;e<t;e++)r=n[e],o.push({pt:this.llToPt((i=(s=r["_omsData"])!=null?s.usualPosition:void 0)!=null?i:r.position),willSpiderfy:!1});return o}.call(this),g=this.markers;for(t=c=0,d=g.length;c<d;t=++c){i=g[t];if(i.map==null||!i.getVisible())continue;s=a[t];if(s.willSpiderfy)continue;y=this.markers;for(n=h=0,v=y.length;h<v;n=++h){o=y[n];if(n===t)continue;if(o.map==null||!o.getVisible())continue;u=a[n];if(n<t&&!u.willSpiderfy)continue;if(this.ptDistanceSq(s.pt,u.pt)<l){s.willSpiderfy=u.willSpiderfy=!0;break}}}b=this.markers,w=[];for(e=p=0,m=b.length;p<m;e=++p)r=b[e],a[e].willSpiderfy&&w.push(r);return w},u.makeHighlightListenerFuncs=function(e){var t=this;return{highlight:function(){return e._omsData.leg.setOptions({strokeColor:t.legColors.highlighted[t.map.mapTypeId],zIndex:t.highlightedLegZIndex})},unhighlight:function(){return e._omsData.leg.setOptions({strokeColor:t.legColors.usual[t.map.mapTypeId],zIndex:t.usualLegZIndex})}}},u.spiderfy=function(t,n){var i,s,o,u,a,f,l,c,h,p,d;return this.spiderfying=!0,p=t.length,i=this.ptAverage(function(){var e,n,r;r=[];for(e=0,n=t.length;e<n;e++)c=t[e],r.push(c.markerPt);return r}()),u=p>=this.circleSpiralSwitchover?this.generatePtsSpiral(p,i).reverse():this.generatePtsCircle(p,i),d=function(){var n,i,c,p=this;c=[];for(n=0,i=u.length;n<i;n++)o=u[n],s=this.ptToLl(o),h=this.minExtract(t,function(e){return p.ptDistanceSq(e.markerPt,o)}),l=h.marker,f=new r.Polyline({map:this.map,path:[l.position,s],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),l._omsData={usualPosition:l.position,leg:f},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(a=this.makeHighlightListenerFuncs(l),l._omsData.hightlightListeners={highlight:e.addListener(l,"mouseover",a.highlight),unhighlight:e.addListener(l,"mouseout",a.unhighlight)}),l.setPosition(s),l.setZIndex(Math.round(this.spiderfiedZIndex+o.y)),c.push(l);return c}.call(this),delete this.spiderfying,this.spiderfied=!0,this.trigger("spiderfy",d,n)},u.unspiderfy=function(t){var n,r,i,s,o,u,a;t==null&&(t=null);if(this.spiderfied==null)return this;this.unspiderfying=!0,s=[],i=[],a=this.markers;for(o=0,u=a.length;o<u;o++)r=a[o],r["_omsData"]!=null?(r._omsData.leg.setMap(null),r!==t&&r.setPosition(r._omsData.usualPosition),r.setZIndex(null),n=r._omsData.hightlightListeners,n!=null&&(e.removeListener(n.highlight),e.removeListener(n.unhighlight)),delete r._omsData,s.push(r)):i.push(r);return delete this.unspiderfying,delete this.spiderfied,this.trigger("unspiderfy",s,i),this},u.ptDistanceSq=function(e,t){var n,r;return n=e.x-t.x,r=e.y-t.y,n*n+r*r},u.ptAverage=function(e){var t,n,i,s,o,u;i=s=0;for(o=0,u=e.length;o<u;o++)n=e[o],i+=n.x,s+=n.y;return t=e.length,new r.Point(i/t,s/t)},u.llToPt=function(e){return this.projHelper.getProjection().fromLatLngToDivPixel(e)},u.ptToLl=function(e){return this.projHelper.getProjection().fromDivPixelToLatLng(e)},u.minExtract=function(e,t){var n,r,i,s,o,u,a;for(i=u=0,a=e.length;u<a;i=++u){s=e[i],o=t(s);if(typeof n=="undefined"||n===null||o<r)r=o,n=i}return e.splice(n,1)[0]},u.arrIndexOf=function(e,t){var n,r,i,s;if(e.indexOf!=null)return e.indexOf(t);for(n=i=0,s=e.length;i<s;n=++i){r=e[n];if(r===t)return n}return-1},p.ProjHelper=function(e){return this.setMap(e)},p.ProjHelper.prototype=new r.OverlayView,p.ProjHelper.prototype.draw=function(){},p}()}.call(this),function(e,t){e["sketchfab-iframe"]=t()}(this,function(){var e,t,n;return function(r){function i(e,t){return w.call(e,t)}function s(e,t){var n,r,i,s,o,u,a,f,l,c,h=t&&t.split("/"),p=y.map,d=p&&p["*"]||{};if(e&&e.charAt(0)===".")if(t){h=h.slice(0,h.length-1),e=h.concat(e.split("/"));for(f=0;f<e.length;f+=1){c=e[f];if(c===".")e.splice(f,1),f-=1;else if(c===".."){if(f===1&&(e[2]===".."||e[0]===".."))break;f>0&&(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((h||d)&&p){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(h)for(l=h.length;l>0;l-=1){i=p[h.slice(0,l).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&&d&&d[r]&&(u=d[r],a=f)}!s&&u&&(s=u,o=a),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function o(e,t){return function(){return p.apply(r,E.call(arguments,0).concat([e,t]))}}function u(e){return function(t){return s(t,e)}}function a(e){return function(t){m[e]=t}}function f(e){if(i(g,e)){var t=g[e];delete g[e],b[e]=!0,h.apply(r,t)}if(!i(m,e)&&!i(b,e))throw new Error("No "+e);return m[e]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return y&&y.config&&y.config[e]||{}}}var h,p,d,v,m={},g={},y={},b={},w=Object.prototype.hasOwnProperty,E=[].slice;d=function(e,t){var n,r=l(e),i=r[0];return e=r[1],i&&(i=s(i,t),n=f(i)),i?n&&n.normalize?e=n.normalize(e,u(t)):e=s(e,t):(e=s(e,t),r=l(e),i=r[0],e=r[1],i&&(n=f(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},v={require:function(e){return o(e)},exports:function(e){var t=m[e];return typeof t!="undefined"?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:c(e)}}},h=function(e,t,n,s){var u,l,c,h,p,y=[],w;s=s||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(p=0;p<t.length;p+=1){h=d(t[p],s),l=h.f;if(l==="require")y[p]=v.require(e);else if(l==="exports")y[p]=v.exports(e),w=!0;else if(l==="module")u=y[p]=v.module(e);else if(i(m,l)||i(g,l)||i(b,l))y[p]=f(l);else{if(!h.p)throw new Error(e+" missing "+l);h.p.load(h.n,o(s,!0),a(l),{}),y[p]=m[l]}}c=n.apply(m[e],y);if(e)if(u&&u.exports!==r&&u.exports!==m[e])m[e]=u.exports;else if(c!==r||!w)m[e]=c}else e&&(m[e]=n)},e=t=p=function(e,t,n,i,s){return typeof e=="string"?v[e]?v[e](t):f(d(e,t).f):(e.splice||(y=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=i,i=s),i?h(r,e,t,n):setTimeout(function(){h(r,e,t,n)},4),p)},p.config=function(e){return y=e,y.deps&&p(y.deps,y.callback),p},n=function(e,t,n){t.splice||(n=t,t=[]),!i(m,e)&&!i(g,e)&&(g[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("vendors/almond/almond",function(){}),function(e){"function"==typeof bootstrap?bootstrap("promise",e):"object"==typeof exports?e(void 0,exports):"function"==typeof n?n("vendors/q/q.min",e):"undefined"!=typeof ses?ses.ok()&&(ses.makeQ=function(){return e(void 0,{})}):e(void 0,Q={})}(function(e,t){function n(e,t){t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(I)&&(e.stack=r(e.stack)+"\n"+I+"\n"+r(t.stack))}function r(e){for(var e=e.split("\n"),t=[],n=0;n<e.length;++n){var r=e[n],i;if(i=/at .+ \((.*):(\d+):\d+\)/.exec(r)){var s=i[2];i=i[1]===x&&s>=S&&s<=X}else i=!1;!i&&-1===r.indexOf("(module.js:")&&-1===r.indexOf("(node.js:")&&t.push(r)}return t.join("\n")}function i(){if(Error.captureStackTrace){var e,t,n=Error.prepareStackTrace;return Error.prepareStackTrace=function(n,r){e=r[1].getFileName(),t=r[1].getLineNumber()},Error().stack,Error.prepareStackTrace=n,x=e,t}}function s(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",Error("").stack),e.apply(e,arguments)}}function o(){function e(e){t&&(r=p(e),_(t,function(e,t){C(function(){r.promiseDispatch.apply(r,t)})},void 0),n=t=void 0)}var t=[],n=[],r,i=H(o.prototype),s=H(u.prototype);return s.promiseDispatch=function(e,i,s){var o=M(arguments);t?(t.push(o),"when"===i&&s[1]&&n.push(s[1])):C(function(){r.promiseDispatch.apply(r,o)})},s.valueOf=function(){return t?s:r.valueOf()},Error.captureStackTrace&&(Error.captureStackTrace(s,o),s.stack=s.stack.substring(s.stack.indexOf("\n")+1)),N(s),i.promise=s,i.resolve=e,i.reject=function(t){e(h(t))},i.notify=function(e){t&&_(n,function(t,n){C(function(){n(e)})},void 0)},i}function u(e,t,n,r){void 0===t&&(t=function(e){return h(Error("Promise does not support operation: "+e))});var i=H(u.prototype);return i.promiseDispatch=function(n,r,s){var o;try{o=e[r]?e[r].apply(i,s):t.call(i,r,s)}catch(u){o=h(u)}n&&n(o)},n&&(i.valueOf=n),r&&(i.exception=r),N(i),i}function a(e){return f(e)?e.valueOf():e}function f(e){return e&&"function"==typeof e.promiseDispatch}function l(e){return!f(a(e))}function c(e){return e=a(e),f(e)&&"exception"in e}function h(e){var e=e||Error(),t=u({when:function(t){if(t){var n=D(q,this);-1!==n&&(R.splice(n,1),q.splice(n,1))}return t?t(e):h(e)}},function(){return h(e)},function(){return this},e);return!U&&"undefined"!=typeof window&&!window.Touch&&window.console&&console.log("Should be empty:",R),U=!0,q.push(t),R.push(e),t}function p(e){if(f(e))return e;if((e=a(e))&&"function"==typeof e.then){var t=o();return e.then(t.resolve,t.reject,t.notify),t.promise}return u({when:function(){return e},get:function(t){return e[t]},put:function(t,n){return e[t]=n,e},del:function(t){return delete e[t],e},post:function(t,n){return e[t].apply(e,n)},apply:function(t){return e.apply(void 0,t)},keys:function(){return B(e)}},void 0,function(){return e})}function d(e,t,r,i){function s(e){try{return t?t(e):e}catch(n){return h(n)}}function u(e){if(r){n(e,l);try{return r(e)}catch(t){return h(t)}}return h(e)}var a=o(),f=!1,l=p(e);return C(function(){l.promiseDispatch(function(e){f||(f=!0,a.resolve(s(e)))},"when",[function(e){f||(f=!0,a.resolve(u(e)))}])}),l.promiseDispatch(void 0,"when",[void 0,function(e){a.notify(i?i(e):e)}]),a.promise}function v(e,t,n){return d(e,function(e){return b(e).then(function(e){return t.apply(void 0,e)},n)},n)}function m(e,t,n){var r=o();return C(function(){p(e).promiseDispatch(r.resolve,t,n)}),r.promise}function g(e){return function(t){var n=M(arguments,1);return m(t,e,n)}}function y(e){var t=M(arguments,1);return W(e,t)}function b(e){return d(e,function(e){var t=e.length;if(0===t)return p(e);var n=o();return _(e,function(r,i,s){l(i)?(e[s]=a(i),0===--t&&n.resolve(e)):d(i,function(r){e[s]=r,0===--t&&n.resolve(e)}).fail(n.reject)},void 0),n.promise})}function w(e,t){return d(e,void 0,t)}function E(e,t){var n=M(arguments,2),r=o();return n.push(r.makeNodeResolver()),z(e,t,n).fail(r.reject),r.promise}var S=i(),x,T=function(){},N=Object.freeze||T;"undefined"!=typeof cajaVM&&(N=cajaVM.def);var C;if("undefined"!=typeof process)C=process.nextTick;else if("function"==typeof setImmediate)C=setImmediate;else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,L={},A=L;k.port1.onmessage=function(){L=L.next;var e=L.task;delete L.task,e()},C=function(e){A=A.next={task:e},k.port2.postMessage(0)}}else C=function(e){setTimeout(e,0)};var O;Function.prototype.bind?(O=Function.prototype.bind,O=O.bind(O.call)):O=function(e){return function(){return e.call.apply(e,arguments)}};var M=O(Array.prototype.slice),_=O(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),D=O(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),P=O(Array.prototype.map||function(e,t){var n=this,r=[];return _(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),H=Object.create||function(e){function t(){}return t.prototype=e,new t},B=Object.keys||function(e){var t=[],n;for(n in e)t.push(n);return t},j=Object.prototype.toString,F;F="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var I="From previous event:";t.nextTick=C,t.defer=o,o.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(M(arguments,1)):e.resolve(n)}},t.promise=function(e){var t=o();return y(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise},t.makePromise=u,u.prototype.then=function(e,t,n){return d(this,e,t,n)},u.prototype.thenResolve=function(e){return d(this,function(){return e})},_("isResolved isFulfilled isRejected dispatch when spread get put del post send invoke keys fapply fcall fbind all allResolved timeout delay catch finally fail fin progress end done nfcall nfapply nfbind ncall napply nbind npost nsend ninvoke nend nodeify".split(" "),function(e,n){u.prototype[n]=function(){return t[n].apply(t,[this].concat(M(arguments)))}},void 0),u.prototype.toSource=function(){return this.toString()},u.prototype.toString=function(){return"[object Promise]"},N(u.prototype),t.nearer=a,t.isPromise=f,t.isResolved=function(e){return l(e)||c(e)},t.isFulfilled=l,t.isRejected=c;var q=[],R=[],U;t.reject=h,t.resolve=p,t.master=function(e){return u({isDef:function(){}},function(t,n){return m(e,t,n)},function(){return a(e)})},t.when=d,t.spread=v,t.async=function(e){return function(){function t(e,t){var s;try{s=n[e](t)}catch(o){return j(o)==="[object StopIteration]"||o instanceof F?o.value:h(o)}return d(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}},t["return"]=function(e){throw new F(e)},t.promised=function(e){return function(){return v([this,b(arguments)],function(t,n){return e.apply(t,n)})}},t.dispatch=m,t.dispatcher=g,t.get=g("get"),t.put=g("put"),t["delete"]=t.del=g("del");var z=t.post=g("post");t.send=function(e,t){var n=M(arguments,2);return z(e,t,n)},t.invoke=s(t.send,"invoke","send");var W=t.fapply=g("apply");t["try"]=y,t.fcall=y,t.fbind=function(e){var t=M(arguments,1);return function(){var n=t.concat(M(arguments));return W(e,n)}},t.keys=g("keys"),t.all=b,t.allResolved=function(e){return d(e,function(e){return d(b(P(e,function(e){return d(e,T,T)})),function(){return P(e,p)})})},t["catch"]=t.fail=w,t.progress=function(e,t){return d(e,void 0,void 0,t)},t["finally"]=t.fin=function(e,t){return d(e,function(e){return d(t(),function(){return e})},function(e){return d(t(),function(){return h(e)})})},t.done=function(e,r,i,s){r=r||i||s?d(e,r,i,s):e,w(r,function(r){C(function(){n(r,e);if(!t.onerror)throw r;t.onerror(r)})})},t.timeout=function(e,t){var n=o(),r=setTimeout(function(){n.reject(Error("Timed out after "+t+" ms"))},t);return d(e,function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)}),n.promise},t.delay=function(e,t){t===void 0&&(t=e,e=void 0);var n=o();return setTimeout(function(){n.resolve(e)},t),n.promise},t.nfapply=function(e,t){var n=M(t),r=o();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise},t.nfcall=function(e){var t=M(arguments,1),n=o();return t.push(n.makeNodeResolver()),W(e,t).fail(n.reject),n.promise},t.nfbind=function(e){var t=M(arguments,1);return function(){var n=t.concat(M(arguments)),r=o();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise}},t.npost=function(e,t,n){var n=M(n),r=o();return n.push(r.makeNodeResolver()),z(e,t,n).fail(r.reject),r.promise},t.nsend=E,t.ninvoke=s(E,"ninvoke","nsend"),t.nodeify=function(e,t){if(!t)return e;e.then(function(e){C(function(){t(null,e)})},function(e){C(function(){t(e)})})};var X=i()}),n("api/sketchfab-iframe",["vendors/q/q.min"],function(e){var t=function(e){this._iframe=e,e.src="about:blank",this._uid=undefined,window.location.href.search("sketchfab")===-1?this._domain=window.location.protocol+"//sketchfab.com":this._domain="///"+window.location.hostname,this._callback=undefined,this._events={};var t=this,n=function(e){if(e.data===undefined||e.data.source===undefined)return;t.message(e.data)};window.addEventListener("message",n,!1),this._messageFunction=n},n=function(e,t){if(e.error!==undefined){if(e.status==="lookat"&&e.error==="camera animation not finished")return;this._events[e.status].reject(e.error),t&&(this._events[e.status]=undefined)}else this._events[e.status].resolve!==undefined&&(this._events[e.status].resolve(e),t&&(this._events[e.status]=undefined))};return t.prototype={setMessageCallback:function(e){this._callback=e},message:function(e){if(e.source!==this._uid)return;e.status!==undefined&&(e.status==="load"?n.call(this,e,!1):n.call(this,e,!0)),this._callback&&this._callback.call(this,e)},load:function(t,n){if(this._events.load!==undefined)return this._events.load.promise;var r=this,i=function(e){var t="?preload=1";return n&&Object.keys(n).forEach(function(e,r,i){var s;n[e]!==undefined&&(s=n[e].toString()),t+="&"+e+"="+s}),r._domain+"/embed/"+e+t};this._uid=t,this._events.load=e.defer();var s=i(t);return this._iframe.src=s,this._events.load.promise},start:function(){return this._events.start!==undefined?this._events.start.promise:(this._events.start=e.defer(),this._iframe.contentWindow.postMessage({command:"start"},"*"),this._events.start.promise)},autospin:function(t){return this._events.autospin!==undefined?this._events.autospin.promise:(this._events.autospin=e.defer(),this._iframe.contentWindow.postMessage({command:"autospin",spin:t},"*"),this._events.autospin.promise)},lookat:function(t,n,r){var i="lookat";return this._events[i]!==undefined&&!this._events[i].promise.isResolved()&&this._events[i].reject("new animation ran"),this._events[i]=e.defer(),this._iframe.contentWindow.postMessage({command:i,eye:t,target:n,duration:r},"*"),this._events[i].promise},stop:function(t){return this._events.stop!==undefined?this._events.stop.promise:(this._events.stop=e.defer(),this._iframe.contentWindow.postMessage({command:"stop"},"*"),this._events.stop.promise)},finish:function(){window.removeEventListener("message",this._messageFunction)}},t.Q=e,t}),n("lib/sketchfab-iframe",["require","api/sketchfab-iframe"],function(e){var t=e("api/sketchfab-iframe"),n=t.Q;return{version:"0.0.1",Sketchfab:t,Q:n}}),t("lib/sketchfab-iframe")}),function(){var e,t=[].slice;e=function(e,n,r){var i,s,o,u,a,f;arguments.length<3&&(u=[window].concat(t.call(arguments)),e=u[0],n=u[1],r=u[2]),f=e,a=n.split(".");for(i=0,o=a.length;i<o;i++)s=a[i],f=f[s]||(f[s]={});r(f,e)},e("mobone",function(t){return t.namespace=e}),window.define=e}.call(this),function(){define("mobone.math",function(e){var t;return t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e==="x"?t:t&3|8,n.toString(16)})},e.uuid=t})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("mobone.string",function(t){var n,r,i,s,o,u;return n={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"},String.prototype.htmlEscape=function(){return this.replace(/[&"'><]/g,function(e){return n[e]})},String.prototype.startsWith=function(e){return this.indexOf(e)===0},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,function(e){return""+e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},s=function(e){return e=decodeURIComponent(e),e.replace(/\+/g," ")},r=function(){function e(e){e!=null&&_.extend(this.options,e)}return e.prototype.options={urlClass:"url",hashtagClass:"hashtag",usernameClass:"username",listClass:"badge",usernameUrlBase:"/",listUrlBase:"/",hashtagUrlBase:"/query?q=%23",suppressNoFollow:!1},e.prototype.internationalise=function(e){return e},e.prototype.autolink=function(e){return twttr.txt.autoLink(e,this.options)},e.prototype.escape=function(e){return e.toString().htmlEscape()},e.prototype.process=function(e){return this.internationalise(this.autolink(this.escape(e)))},e}(),i=function(){function t(t){this.templateFromId=e(this.templateFromId,this),this.template=e(this.template,this),t!=null&&_.extend(this.syntax,t)}return t.prototype.escape="mobone.string.processor.escape",t.prototype.process="mobone.string.processor.process",t.prototype.syntax={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%-([\s\S]+?)%>/g,escape:/<%=([\s\S]+?)%>/g,process:/<%~([\s\S]+?)%>/g},t.prototype.template=function(e,t){var n,r,i,s,o;return i="var __p=[],print=function(){__p.push.apply(__p,arguments);};\nwith(obj||{}){__p.push('",s="');}return __p.join('');",n=e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(this.syntax.interpolate,function(e,t){return t=t.replace(/\\'/g,"'"),"',"+t+",'"}).replace(this.syntax.escape,function(e){return function(t,n){return n=n.replace(/\\'/g,"'"),"',"+e.escape+"("+n+"),'"}}(this)).replace(this.syntax.process,function(e){return function(t,n){return n=n.replace(/\\'/g,"'"),"',"+e.process+"("+n+"),'"}}(this)).replace(this.syntax.evaluate||null,function(e,t){return t=t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," "),"');"+t+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t"),o=""+i+n+s,r=new Function("obj",o),t?r(t):r},t.prototype.templateFromId=function(e,t){var n;n=$("#"+e);if(n.length>0)return this.template(n.html(),t);if(typeof console!="undefined"&&console!==null&&console.warn!=null)return console.warn("Template #"+e+" does not exist")},t}(),t.decode=s,t.Processor=r,t.TemplateFactory=i,u=new r,t.processor=u,o=new i,t.template=o.template,t.templateFromId=o.templateFromId})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty,n=function(e,t){return function(){return e.apply(t,arguments)}};define("mobone.view",function(t){var r,i,s,o,u,a,f,l;return i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.snapshot=function(){},n.prototype.restore=function(){},n.prototype.show=function(){},n.prototype.hide=function(){},n}(Backbone.View),l=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.show=function(){return $(this.el).show()},n.prototype.hide=function(){return $(this.el).hide()},n}(i),a=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.el.bind("pagebeforeshow",function(e){return function(t,n){return e.restore(t,t.target,n.prevPage)}}(this)),this.el.bind("pagebeforehide",function(e){return function(t,n){return e.snapshot(t,t.target,n.nextPage)}}(this)),this.el.bind("pageshow",function(e){return function(t,n){return e.show(t,t.target,n.prevPage)}}(this)),this.el.bind("pagehide",function(e){return function(t,n){return e.hide(t,t.target,n.nextPage)}}(this))}return e(n,t),n}(i),o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(a),f=function(t){function r(){return this.handleClick=n(this.handleClick,this),r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.events={vclick:"handleClick"},r.prototype.handleClick=function(e){var t,n,r,i;i=$(e.target).closest("a");if(!i.length>0)return;r=i.data("relative-path");if(r==null)return;return n=window.location.pathname,n.endsWith("/")||(n+="/"),r.startsWith("/")&&(r=r.slice(1)),t=""+n+r,i.attr("href",t)},r}(Backbone.View),s=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return this.model.bind("change",this.render),this.model.bind("destroy",this.remove),this.model.view=this,this.render()},n}(Backbone.View),r=function(t){function r(){return this.reset=n(this.reset,this),this.add=
n(this.add,this),r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.add=function(){},r.prototype.reset=function(){return this.collection.each(this.add)},r.prototype.initialize=function(){return this.collection.bind("add",this.add),this.collection.bind("reset",this.reset),this.collection.bind("remove",function(e){return function(e){return e.view.remove()}}(this)),this.collection.each(this.add)},r}(Backbone.View),u=function(t){function r(){return this.logout=n(this.logout,this),r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.events={"click .logout-link":"logout"},r.prototype.logout=function(){return this.$logout_form.submit(),!1},r.prototype.initialize=function(){return this.$logout_form=$(".logout-form")},r}(Backbone.View),t.Widget=l,t.Page=a,t.Dialog=o,t.RelativeButton=f,t.BaseWidget=s,t.BaseListing=r,t.LogoutWidget=u})}.call(this);if(typeof jQuery=="undefined")throw new Error("Bootstrap requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]}}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed.bs.alert").remove()}var n=e(this),r=n.attr("data-target");r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var i=e(r);t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one(e.support.transition.end,s).emulateTransitionEnd(150):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r)};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.is("input")?"val":"html",i=n.data();e+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]'),t=!0;if(e.length){var n=this.$element.find("input");n.prop("type")==="radio"&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s=typeof n=="object"&&n;i||r.data("bs.button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,r=this.getActiveIndex();if(t>this.$items.length-1||t<0)return;return this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(this.sliding)return;return this.slide("next")},t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")},t.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[u]()}this.sliding=!0,s&&this.pause();var f=e.Event("slide.bs.carousel",{relatedTarget:i[0],direction:o});if(i.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(a.$indicators.children()[a.getActiveIndex()]);t&&t.addClass("active")}));if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),r.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return s&&this.cycle(),this};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data()),o=n.attr("data-slide-to");o&&(s.interval=!1),i.carousel(s),(o=n.attr("data-slide-to"))&&i.data("bs.carousel").to(o),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var t=e.Event("show.bs.collapse");this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;n.collapse("hide"),r||n.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",i].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[i](this.$element[0][o])},t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var t=e.Event("hide.bs.collapse");this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!e.support.transition)return r.call(this);this.$element[n](0).one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350)},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n);i||r.data("bs.collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i),o=s.data("bs.collapse"),u=o?"toggle":n.data(),a=n.attr("data-parent"),f=a&&e(a);if(!o||!o.transitioning)f&&f.find('[data-toggle=collapse][data-parent="'+a+'"]').not(n).addClass("collapsed"),n[s.hasClass("in")?"addClass":"removeClass"]("collapsed");s.collapse(u)})}(jQuery),+function(e){"use strict";function i(){e(t).remove(),e(n).each(function(t){var n=s(e(this));if(!n.hasClass("open"))return;n.trigger(t=e.Event("hide.bs.dropdown"));if(t.isDefaultPrevented())return;n.removeClass("open").trigger("hidden.bs.dropdown")})}function s(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var t=".dropdown-backdrop",n="[data-toggle=dropdown]",r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=s(n),o=r.hasClass("open");i();if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",i),r.trigger(t=e.Event("show.bs.dropdown"));if(t.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown"),n.focus()}return!1},r.prototype.keydown=function(t){if(!/(38|40|27)/.test(t.keyCode))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var i=s(r),o=i.hasClass("open");if(!o||o&&t.keyCode==27)return t.which==27&&i.find(n).focus(),r.click();var u=e("[role=menu] li:not(.divider):visible a",i);if(!u.length)return;var a=u.index(u.filter(":focus"));t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<u.length-1&&a++,~a||(a=0),u.eq(a).focus()};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n+", [role=menu]",r.prototype.keydown)}(jQuery),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r);if(this.isShown||r.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(i)}).emulateTransitionEnd(300):n.$element.focus().trigger(i)})},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]!==e.target&&!this.$element.has(e.target).length&&this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",e.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);s||i.data("bs.modal",s=new t(this,o)),typeof n=="string"?s[n](r):o.show&&s.show(r)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r);var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focus",a=o=="hover"?"mouseleave":"blur";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var r=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,s=i.test(r);s&&(r=r.replace(i,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var o=this.getPosition(),u=n[0].offsetWidth,a=n[0].offsetHeight;if(s){var f=this.$element.parent(),l=r,c=document.documentElement.scrollTop||document.body.scrollTop,h=this.options.container=="body"?window.innerWidth:f.outerWidth(),p=this.options.container=="body"?window.innerHeight:f.outerHeight(),d=this.options.container=="body"?0:f.offset().left;r=r=="bottom"&&o.top+o.height+a-c>p?"top":r=="top"&&o.top-c-a<0?"bottom":r=="right"&&o.right+u>h?"left":r=="left"&&o.left-u<d?"right":r,n.removeClass(l).addClass(r)}var v=this.getCalculatedOffset(r,o,u,a);this.applyPlacement(v,r),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var n,r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),e.top=e.top+o,e.left=e.left+u,r.offset(e).addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;t=="top"&&f!=s&&(n=!0,e.top=e.top+s-f);if(/bottom|top/.test(t)){var l=0;e.left<0&&(l=e.left*-2,e.left=0,r.offset(e),a=r[0].offsetWidth,f=r[0].offsetHeight),this.replaceArrow(l-i+a,a,"left")}else this.replaceArrow(f-s,f,"top");n&&r.offset(e)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function i(){t.hoverState!="in"&&n.detach()}var t=this,n=this.tip(),r=e.Event("hide.bs."+this.type);this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),this.$element.trigger("hidden.bs."+this.type),this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s=typeof n=="object"&&n;i||r.data("bs.popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(n,r){var i,s=e.proxy(this.process,this);this.$element=e(n).is("body")?e(window):e(n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||(i=e(n).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this,r=this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#\w/.test(i)&&e(i);return s&&s.length&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parents(".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s=typeof n=="object"&&n;i||r.data("bs.scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});t.trigger(s);if(s.isDefaultPrevented())return;var o=e(r);this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})},t.prototype.activate=function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o).emulateTransitionEnd(150):o(),i.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var n=e(document).height(),r=this.$window.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.top,u=s.bottom;typeof s!="object"&&(u=o=s),typeof o=="function"&&(o=s.top()),typeof u=="function"&&(u=s.bottom());var a=this.unpin!=null&&r+this.unpin<=i.top?!1:u!=null&&i.top+this.$element.height()>=n-u?"bottom":o!=null&&r<=o?"top":!1;if(this.affixed===a)return;this.unpin&&this.$element.css("top",""),this.affixed=a,this.unpin=a=="bottom"?i.top-r:null,this.$element.removeClass(t.RESET).addClass("affix"+(a?"-"+a:"")),a=="bottom"&&this.$element.offset({top:document.body.offsetHeight-u-this.$element.height()})};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s=typeof n=="object"&&n;i||r.data("bs.affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery);if(typeof jQuery=="undefined")throw new Error("Jasny Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]};return!1}if(e.support.transition!==undefined)return;e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t()})}(window.jQuery),+function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),e(window).on("resize",e.proxy(this.recalc,this))),this.options.autohide&&e(document).on("click",e.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};t.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0,modal:!1},t.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},t.prototype.calcPlacement=function(){function i(e,t){if(r.css(t)==="auto")return e;if(r.css(e)==="auto")return t;var n=parseInt(r.css(e),10),i=parseInt(r.css(t),10);return n>i?t:e}if(this.options.placement!=="auto"){this.placement=this.options.placement;return}this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var t=e(window).width()/this.$element.width(),n=e(window).height()/this.$element.height(),r=this.$element;this.placement=t>=n?i("left","right"):i("top","bottom"),this.$element.css("visibility")==="hidden !important"&&this.$element.removeClass("in").css("visiblity","")},t.prototype.opposite=function(e){switch(e){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},t.prototype.getCanvasElements=function(){var t=this.options.canvas?e(this.options.canvas):this.$element,n=t.find("*").filter(function(){return e(this).css("position")==="fixed"}).not(this.options.exclude);return t.add(n)},t.prototype.slide=function(t,n,r){if(!e.support.transition){var i={};return i[this.placement]="+="+n,t.animate(i,350,r)}var s=this.placement,o=this.opposite(s);t.each(function(){e(this).css(s)!=="auto"&&e(this).css(s,(parseInt(e(this).css(s),10)||0)+n),e(this).css(o)!=="auto"&&e(this).css(o,(parseInt(e(this).css(o),10)||0)-n)}),this.$element.one(e.support.transition.end,r).emulateTransitionEnd(350)},t.prototype.disableScrolling=function(){var t=e("body").width(),n="padding-"+this.opposite(this.placement);e("body").data("offcanvas-style")===undefined&&e("body").data("offcanvas-style",e("body").attr("style")||""),e("body").css("overflow","hidden");if(e("body").width()>t){var r=parseInt(e("body").css(n),10)+e("body").width()-t;setTimeout(function(){e("body").css(n,r)},1)}e("body").on("touchmove.bs",function(e){e.preventDefault()})},t.prototype.enableScrolling=function(){e("body").off("touchmove.bs")},t.prototype.show=function(){if(this.state)return;var t=e.Event("show.bs.offcanvas");this.$element.trigger(t);if(t.isDefaultPrevented())return;this.state="slide-in",this.calcPlacement();var n=this.getCanvasElements(),r=this.placement,i=this.opposite(r),s=this.offset();n.index(this.$element)!==-1&&(e(this.$element).data("offcanvas-style",e(this.$element).attr("style")||""),this.$element.css(r,-1*s),this.$element.css(r)),n.addClass("canvas-sliding").each(function(){e(this).data("offcanvas-style")===undefined&&e(this).data("offcanvas-style",e(this).attr("style")||""),e(this).css("position")==="static"&&e(this).css("position","relative"),(e(this).css(r)==="auto"||e(this).css(r)==="0px")&&(e(this).css(i)==="auto"||e(this).css(i)==="0px")&&e(this).css(r,0)}),
this.options.disableScrolling&&this.disableScrolling(),this.options.modal&&this.toggleBackdrop();var o=function(){if(this.state!="slide-in")return;this.state="slid",n.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas")};setTimeout(e.proxy(function(){this.$element.addClass("in"),this.slide(n,s,e.proxy(o,this))},this),1)},t.prototype.hide=function(t){if(this.state!=="slid")return;var n=e.Event("hide.bs.offcanvas");this.$element.trigger(n);if(n.isDefaultPrevented())return;this.state="slide-out";var r=e(".canvas-slid"),i=this.placement,s=-1*this.offset(),o=function(){if(this.state!="slide-out")return;this.state=null,this.placement=null,this.$element.removeClass("in"),r.removeClass("canvas-sliding"),r.add(this.$element).add("body").each(function(){e(this).attr("style",e(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas")};this.options.disableScrolling&&this.enableScrolling(),this.options.modal&&this.toggleBackdrop(),r.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(e.proxy(function(){this.slide(r,s,e.proxy(o,this))},this),1)},t.prototype.toggle=function(){if(this.state==="slide-in"||this.state==="slide-out")return;this[this.state==="slid"?"hide":"show"]()},t.prototype.toggleBackdrop=function(t){t=t||e.noop;if(this.state=="slide-in"){var n=e.support.transition;this.$backdrop=e('<div class="modal-backdrop fade" />').insertAfter(this.$element),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else if(this.state=="slide-out"&&this.$backdrop){this.$backdrop.removeClass("in"),e("body").off("touchmove.bs");var r=this;e.support.transition?this.$backdrop.one(e.support.transition.end,function(){r.$backdrop.remove(),t(),r.$backdrop=null}).emulateTransitionEnd(150):(this.$backdrop.remove(),this.$backdrop=null,t())}else t&&t()},t.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(e("body"))},t.prototype.recalc=function(){if(this.$calcClone.css("display")==="none"||this.state!=="slid"&&this.state!=="slide-in")return;this.state=null,this.placement=null;var t=this.getCanvasElements();this.$element.removeClass("in"),t.removeClass("canvas-slid"),t.add(this.$element).add("body").each(function(){e(this).attr("style",e(this).data("offcanvas-style")).removeData("offcanvas-style")})},t.prototype.autohide=function(t){e(t.target).closest(this.$element).length===0&&this.hide()};var n=e.fn.offcanvas;e.fn.offcanvas=function(n){return this.each(function(){var r=e(this),i=r.data("bs.offcanvas"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n);i||r.data("bs.offcanvas",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.offcanvas.Constructor=t,e.fn.offcanvas.noConflict=function(){return e.fn.offcanvas=n,this},e(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i),o=s.data("bs.offcanvas"),u=o?"toggle":n.data();t.stopPropagation(),o?o.toggle():s.offcanvas(u)})}(window.jQuery),+function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",e.proxy(this.click,this))};t.DEFAULTS={target:"a"},t.prototype.click=function(t){var n=e(t.currentTarget).closest("tr").find(this.options.target)[0];if(e(t.target)[0]===n)return;t.preventDefault();if(n.click)n.click();else if(document.createEvent){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}};var n=e.fn.rowlink;e.fn.rowlink=function(n){return this.each(function(){var r=e(this),i=r.data("bs.rowlink");i||r.data("bs.rowlink",i=new t(this,n))})},e.fn.rowlink.Constructor=t,e.fn.rowlink.noConflict=function(){return e.fn.rowlink=n,this},e(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(t){if(e(t.target).closest(".rowlink-skip").length!==0)return;var n=e(this);if(n.data("bs.rowlink"))return;n.rowlink(n.data()),e(t.target).trigger("click.bs.rowlink")})}(window.jQuery),+function(e){"use strict";var t=window.orientation!==undefined,n=navigator.userAgent.toLowerCase().indexOf("android")>-1,r=window.navigator.appName=="Microsoft Internet Explorer",i=function(t,r){if(n)return;this.$element=e(t),this.options=e.extend({},i.DEFAULTS,r),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal()};i.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]",w:"[A-Za-z0-9]","*":"."}},i.prototype.init=function(){var t=this.options.definitions,n=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,e.each(this.mask.split(""),e.proxy(function(e,r){r=="?"?(n--,this.partialPosition=e):t[r]?(this.tests.push(new RegExp(t[r])),this.firstNonMaskPos===null&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=e.map(this.mask.split(""),e.proxy(function(e,n){if(e!="?")return t[e]?this.options.placeholder:e},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",e.proxy(function(){return e.map(this.buffer,function(e,t){return this.tests[t]&&e!=this.options.placeholder?e:null}).join("")},this))},i.prototype.listen=function(){if(this.$element.attr("readonly"))return;var t=(r?"paste":"input")+".bs.inputmask";this.$element.on("unmask.bs.inputmask",e.proxy(this.unmask,this)).on("focus.bs.inputmask",e.proxy(this.focusEvent,this)).on("blur.bs.inputmask",e.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",e.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",e.proxy(this.keypressEvent,this)).on(t,e.proxy(this.pasteEvent,this))},i.prototype.caret=function(e,t){if(this.$element.length===0)return;if(typeof e=="number")return t=typeof t=="number"?t:e,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}});if(this.$element[0].setSelectionRange)e=this.$element[0].selectionStart,t=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length}return{begin:e,end:t}},i.prototype.seekNext=function(e){var t=this.mask.length;while(++e<=t&&!this.tests[e]);return e},i.prototype.seekPrev=function(e){while(--e>=0&&!this.tests[e]);return e},i.prototype.shiftL=function(e,t){var n=this.mask.length;if(e<0)return;for(var r=e,i=this.seekNext(t);r<n;r++)if(this.tests[r]){if(!(i<n&&this.tests[r].test(this.buffer[i])))break;this.buffer[r]=this.buffer[i],this.buffer[i]=this.options.placeholder,i=this.seekNext(i)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))},i.prototype.shiftR=function(e){var t=this.mask.length;for(var n=e,r=this.options.placeholder;n<t;n++)if(this.tests[n]){var i=this.seekNext(n),s=this.buffer[n];this.buffer[n]=r;if(!(i<t&&this.tests[i].test(s)))break;r=s}},i.prototype.unmask=function(){this.$element.unbind(".bs.inputmask").removeData("bs.inputmask")},i.prototype.focusEvent=function(){this.focusText=this.$element.val();var e=this.mask.length,t=this.checkVal();this.writeBuffer();var n=this,r=function(){t==e?n.caret(0,t):n.caret(t)};r(),setTimeout(r,50)},i.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&(this.$element.trigger("change"),this.$element.trigger("input"))},i.prototype.keydownEvent=function(e){var n=e.which;if(n==8||n==46||t&&n==127){var r=this.caret(),i=r.begin,s=r.end;return s-i===0&&(i=n!=46?this.seekPrev(i):s=this.seekNext(i-1),s=n==46?this.seekNext(s):s),this.clearBuffer(i,s),this.shiftL(i,s-1),!1}if(n==27)return this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1},i.prototype.keypressEvent=function(e){var t=this.mask.length,n=e.which,r=this.caret();if(e.ctrlKey||e.altKey||e.metaKey||n<32)return!0;if(n){r.end-r.begin!==0&&(this.clearBuffer(r.begin,r.end),this.shiftL(r.begin,r.end-1));var i=this.seekNext(r.begin-1);if(i<t){var s=String.fromCharCode(n);if(this.tests[i].test(s)){this.shiftR(i),this.buffer[i]=s,this.writeBuffer();var o=this.seekNext(i);this.caret(o)}}return!1}},i.prototype.pasteEvent=function(){var e=this;setTimeout(function(){e.caret(e.checkVal(!0))},0)},i.prototype.clearBuffer=function(e,t){var n=this.mask.length;for(var r=e;r<t&&r<n;r++)this.tests[r]&&(this.buffer[r]=this.options.placeholder)},i.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},i.prototype.checkVal=function(e){var t=this.mask.length,n=this.$element.val(),r=-1;for(var i=0,s=0;i<t;i++)if(this.tests[i]){this.buffer[i]=this.options.placeholder;while(s++<n.length){var o=n.charAt(s-1);if(this.tests[i].test(o)){this.buffer[i]=o,r=i;break}}if(s>n.length)break}else this.buffer[i]==n.charAt(s)&&i!=this.partialPosition&&(s++,r=i);if(!e&&r+1<this.partialPosition)this.$element.val(""),this.clearBuffer(0,t);else if(e||r+1>=this.partialPosition)this.writeBuffer(),e||this.$element.val(this.$element.val().substring(0,r+1));return this.partialPosition?i:this.firstNonMaskPos};var s=e.fn.inputmask;e.fn.inputmask=function(t){return this.each(function(){var n=e(this),r=n.data("bs.inputmask");r||n.data("bs.inputmask",r=new i(this,t))})},e.fn.inputmask.Constructor=i,e.fn.inputmask.noConflict=function(){return e.fn.inputmask=s,this},e(document).on("focus.bs.inputmask.data-api","[data-mask]",function(t){var n=e(this);if(n.data("bs.inputmask"))return;n.inputmask(n.data())})}(window.jQuery),+function(e){"use strict";var t=window.navigator.appName=="Microsoft Internet Explorer",n=function(t,n){this.$element=e(t),this.$input=this.$element.find(":file");if(this.$input.length===0)return;this.name=this.$input.attr("name")||n.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),this.$hidden.length===0&&(this.$hidden=e('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var r=this.$preview.css("height");this.$preview.css("display")!=="inline"&&r!=="0px"&&r!=="none"&&this.$preview.css("line-height",r),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()};n.prototype.listen=function(){this.$input.on("change.bs.fileinput",e.proxy(this.change,this)),e(this.$input[0].form).on("reset.bs.fileinput",e.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",e.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",e.proxy(this.clear,this))},n.prototype.change=function(t){var n=t.target.files===undefined?t.target&&t.target.value?[{name:t.target.value.replace(/^.+\\/,"")}]:[]:t.target.files;t.stopPropagation();if(n.length===0){this.clear();return}this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var r=n[0];if(this.$preview.length>0&&(typeof r.type!="undefined"?r.type.match(/^image\/(gif|png|jpeg)$/):r.name.match(/\.(gif|png|jpe?g)$/i))&&typeof FileReader!="undefined"){var i=new FileReader,s=this.$preview,o=this.$element;i.onload=function(t){var i=e("<img>");i[0].src=t.target.result,n[0].result=t.target.result,o.find(".fileinput-filename").text(r.name),s.css("max-height")!="none"&&i.css("max-height",parseInt(s.css("max-height"),10)-parseInt(s.css("padding-top"),10)-parseInt(s.css("padding-bottom"),10)-parseInt(s.css("border-top"),10)-parseInt(s.css("border-bottom"),10)),s.html(i),o.addClass("fileinput-exists").removeClass("fileinput-new"),o.trigger("change.bs.fileinput",n)},i.readAsDataURL(r)}else this.$element.find(".fileinput-filename").text(r.name),this.$preview.text(r.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},n.prototype.clear=function(e){e&&e.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name","");if(t){var n=this.$input.clone(!0);this.$input.after(n),this.$input.remove(),this.$input=n}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),e!==undefined&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},n.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},n.prototype.trigger=function(e){this.$input.trigger("click"),e.preventDefault()};var r=e.fn.fileinput;e.fn.fileinput=function(t){return this.each(function(){var r=e(this),i=r.data("bs.fileinput");i||r.data("bs.fileinput",i=new n(this,t)),typeof t=="string"&&i[t]()})},e.fn.fileinput.Constructor=n,e.fn.fileinput.noConflict=function(){return e.fn.fileinput=r,this},e(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(t){var n=e(this);if(n.data("bs.fileinput"))return;n.fileinput(n.data());var r=e(t.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');r.length>0&&(t.preventDefault(),r.trigger("click.bs.fileinput"))})}(window.jQuery),function(){function e(e,n,r,i){return new t(e,n,r,i)}function t(e,t,r,s){this.options=s||{},this.options.adapters=this.options.adapters||{},this.obj=e,this.keypath=t,this.callback=r,this.objectPath=[],this.parse(),n(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function n(e){return"object"==typeof e&&null!==e}function r(e){throw new Error("[sightglass] "+e)}e.adapters={},t.tokenize=function(e,t,n){var r,i,s=[],o={i:n,path:""};for(r=0;r<e.length;r++)i=e.charAt(r),~t.indexOf(i)?(s.push(o),o={i:i,path:""}):o.path+=i;return s.push(o),s},t.prototype.parse=function(){var n,i,o=this.interfaces();o.length||r("Must define at least one adapter interface."),~o.indexOf(this.keypath[0])?(n=this.keypath[0],i=this.keypath.substr(1)):("undefined"==typeof (n=this.options.root||e.root)&&r("Must define a default root adapter."),i=this.keypath),this.tokens=t.tokenize(i,o,n),this.key=this.tokens.pop()},t.prototype.realize=function(){var e,t=this.obj,r=!1;return this.tokens.forEach(function(o,u){n(t)?("undefined"!=typeof this.objectPath[u]?t!==(e=this.objectPath[u])&&(this.set(!1,o,e,this.update.bind(this)),this.set(!0,o,t,this.update.bind(this)),this.objectPath[u]=t):(this.set(!0,o,t,this.update.bind(this)),this.objectPath[u]=t),t=this.get(o,t)):(r===!1&&(r=u),(e=this.objectPath[u])&&this.set(!1,o,e,this.update.bind(this)))},this),r!==!1&&this.objectPath.splice(r),t},t.prototype.update=function(){var e,t;(e=this.realize())!==this.target&&(n(this.target)&&this.set(!1,this.key,this.target,this.callback),n(e)&&this.set(!0,this.key,e,this.callback),t=this.value(),this.target=e,this.value()!==t&&this.callback())},t.prototype.value=function(){return n(this.target)?this.get(this.key,this.target):void 0},t.prototype.setValue=function(e){n(this.target)&&this.adapter(this.key).set(this.target,this.key.path,e)},t.prototype.get=function(e,t){return this.adapter(e).get(t,e.path)},t.prototype.set=function(e,t,n,r){var i=e?"observe":"unobserve";this.adapter(t)[i](n,t.path,r)},t.prototype.interfaces=function(){var t=Object.keys(this.options.adapters);return Object.keys(e.adapters).forEach(function(e){~t.indexOf(e)||t.push(e)}),t},t.prototype.adapter=function(t){return this.options.adapters[t.i]||e.adapters[t.i]},t.prototype.unobserve=function(){var e;this.tokens.forEach(function(t,n){(e=this.objectPath[n])&&this.set(!1,t,e,this.update.bind(this))},this),n(this.target)&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define([],function(){return this.sightglass=e}):this.sightglass=e}.call(this),function(){var e,t,n,r,i=function(e,t){return function(){return e.apply(t,arguments)}},s=[].slice,o={}.hasOwnProperty,u=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};e={options:["prefix","templateDelimiters","rootInterface","preloadData","handler"],extensions:["binders","formatters","components","adapters"],"public":{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(e,t,n){return this.call(e,t,n.view.models)},configure:function(t){var n,r,i,s;null==t&&(t={});for(i in t)if(s=t[i],"binders"===i||"components"===i||"formatters"===i||"adapters"===i)for(r in s)n=s[r],e[i][r]=n;else e["public"][i]=s},bind:function(t,n,r){var i;return null==n&&(n={}),null==r&&(r={}),i=new e.View(t,n,r),i.bind(),i},init:function(t,n,r){var i,s;return null==r&&(r={}),null==n&&(n=document.createElement("div")),t=e["public"].components[t],n.innerHTML=t.template.call(this,n),i=t.initialize.call(this,n,r),s=new e.View(n,i),s.bind(),s}}},window.jQuery||window.$?(r="on"in jQuery.prototype?["on","off"]:["bind","unbind"],t=r[0],n=r[1],e.Util={bindEvent:function(e,n,r){return jQuery(e)[t](n,r)},unbindEvent:function(e,t,r){return jQuery(e)[n](t,r)},getInputValue:function(e){var t;return t=jQuery(e),"checkbox"===t.attr("type")?t.is(":checked"):t.val()}}):e.Util={bindEvent:function(){return"addEventListener"in window?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)}}(),unbindEvent:function(){return"removeEventListener"in window?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)}}(),getInputValue:function(e){var t,n,r,i;if("checkbox"===e.type)return e.checked;if("select-multiple"===e.type){for(i=[],n=0,r=e.length;r>n;n++)t=e[n],t.selected&&i.push(t.value);return i}return e.value}},e.TypeParser=function(){function e(){}return e.types={primitive:0,keypath:1},e.parse=function(e){return/^'.*'$|^".*"$/.test(e)?{type:this.types.primitive,value:e.slice(1,-1)}:"true"===e?{type:this.types.primitive,value:!0}:"false"===e?{type:this.types.primitive,value:!1}:"null"===e?{type:this.types.primitive,value:null}:"undefined"===e?{type:this.types.primitive,value:void 0}:isNaN(Number(e))===!1?{type:this.types.primitive,value:Number(e)}:{type:this.types.keypath,value:e}},e}(),e.TextTemplateParser=function(){function e(){}return e.types={text:0,binding:1},e.parse=function(e,t){var n,r,i,s,o,u,a;for(u=[],s=e.length,n=0,r=0;s>r;){if(n=e.indexOf(t[0],r),0>n){u.push({type:this.types.text,value:e.slice(r)});break}if(n>0&&n>r&&u.push({type:this.types.text,value:e.slice(r,n)}),r=n+t[0].length,n=e.indexOf(t[1],r),0>n){o=e.slice(r-t[1].length),i=u[u.length-1],(null!=i?i.type:void 0)===this.types.text?i.value+=o:u.push({type:this.types.text,value:o});break}a=e.slice(r,n).trim(),u.push({type:this.types.binding,value:a}),r=n+t[1].length}return u},e}(),e.View=function(){function t(t,n,r){var s,o,u,a,f,l,c,h,p,d,v,m,g;for(this.els=t,this.models=n,null==r&&(r={}),this.update=i(this.update,this),this.publish=i(this.publish,this),this.sync=i(this.sync,this),this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.select=i(this.select,this),this.traverse=i(this.traverse,this),this.build=i(this.build,this),this.buildBinding=i(this.buildBinding,this),this.bindingRegExp=i(this.bindingRegExp,this),this.options=i(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),p=e.extensions,f=0,c=p.length;c>f;f++){if(o=p[f],this[o]={},r[o]){d=r[o];for(s in d)u=d[s],this[o][s]=u}v=e["public"][o];for(s in v)u=v[s],null==(a=this[o])[s]&&(a[s]=u)}for(m=e.options,l=0,h=m.length;h>l;l++)o=m[l],this[o]=null!=(g=r[o])?g:e["public"][o];this.build()}return t.prototype.options=function(){var t,n,r,i,s;for(n={},s=e.extensions.concat(e.options),r=0,i=s.length;i>r;r++)t=s[r],n[t]=this[t];return n},t.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},t.prototype.buildBinding=function(t,n,r,i){var s,o,u,a,f,l,c;return f={},c=function(){var e,t,n,r;for(n=i.split("|"),r=[],e=0,t=n.length;t>e;e++)l=n[e],r.push(l.trim());return r}(),s=function(){var e,t,n,r;for(n=c.shift().split("<"),r=[],e=0,t=n.length;t>e;e++)o=n[e],r.push(o.trim());return r}(),a=s.shift(),f.formatters=c,(u=s.shift())&&(f.dependencies=u.split(/\s+/)),this.bindings.push(new e[t](this,n,r,a,f))},t.prototype.build=function(){var t,n,r,i,s;for(this.bindings=[],n=function(t){return function(r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g;if(3===r.nodeType){if(a=e.TextTemplateParser,(o=t.templateDelimiters)&&(c=a.parse(r.data,o)).length&&(1!==c.length||c[0].type!==a.types.text)){for(h=0,d=c.length;d>h;h++)l=c[h],f=document.createTextNode(l.value),r.parentNode.insertBefore(f,r),1===l.type&&t.buildBinding("TextBinding",f,null,l.value);r.parentNode.removeChild(r)}}else 1===r.nodeType&&(i=t.traverse(r));if(!i){for(m=function(){var e,t,n,i;for(n=r.childNodes,i=[],e=0,t=n.length;t>e;e++)u=n[e],i.push(u);return i}(),g=[],p=0,v=m.length;v>p;p++)s=m[p],g.push(n(s));return g}}}(this),s=this.els,r=0,i=s.length;i>r;r++)t=s[r],n(t);this.bindings.sort(function(e,t){var n,r;return((null!=(n=t.binder)?n.priority:void 0)||0)-((null!=(r=e.binder)?r.priority:void 0)||0)})},t.prototype.traverse=function(t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;for(s=this.bindingRegExp(),o="SCRIPT"===t.nodeName||"STYLE"===t.nodeName,v=t.attributes,c=0,p=v.length;p>c;c++)if(n=v[c],s.test(n.name)){if(f=n.name.replace(s,""),!(i=this.binders[f])){m=this.binders;for(u in m)l=m[u],"*"!==u&&-1!==u.indexOf("*")&&(a=new RegExp("^"+u.replace(/\*/g,".+")+"$"),a.test(f)&&(i=l))}i||(i=this.binders["*"]),i.block&&(o=!0,r=[n])}for(g=r||t.attributes,h=0,d=g.length;d>h;h++)n=g[h],s.test(n.name)&&(f=n.name.replace(s,""),this.buildBinding("Binding",t,f,n.value));return o||(f=t.nodeName.toLowerCase(),this.components[f]&&!t._bound&&(this.bindings.push(new e.ComponentBinding(this,t,f)),o=!0)),o},t.prototype.select=function(e){var t,n,r,i,s;for(i=this.bindings,s=[],n=0,r=i.length;r>n;n++)t=i[n],e(t)&&s.push(t);return s},t.prototype.bind=function(){var e,t,n,r,i;for(r=this.bindings,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.bind());return i},t.prototype.unbind=function(){var e,t,n,r,i;for(r=this.bindings,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.unbind());return i},t.prototype.sync=function(){var e,t,n,r,i;for(r=this.bindings,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.sync());return i},t.prototype.publish=function(){var e,t,n,r,i;for(r=this.select(function(e){return e.binder.publishes}),i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.publish());return i},t.prototype.update=function(e){var t,n,r,i,s,o,u;null==e&&(e={});for(n in e)r=e[n],this.models[n]=r;for(o=this.bindings,u=[],i=0,s=o.length;s>i;i++)t=o[i],u.push(t.update(e));return u},t}(),e.Binding=function(){function t(e,t,n,r,s){this.view=e,this.el=t,this.type=n,this.keypath=r,this.options=null!=s?s:{},this.getValue=i(this.getValue,this),this.update=i(this.update,this),this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.publish=i(this.publish,this),this.sync=i(this.sync,this),this.set=i(this.set,this),this.eventHandler=i(this.eventHandler,this),this.formattedValue=i(this.formattedValue,this),this.parseTarget=i(this.parseTarget,this),this.observe=i(this.observe,this),this.setBinder=i(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var e,t,n,r;if(!(this.binder=this.view.binders[this.type])){r=this.view.binders;for(e in r)n=r[e],"*"!==e&&-1!==e.indexOf("*")&&(t=new RegExp("^"+e.replace(/\*/g,".+")+"$"),t.test(this.type)&&(this.binder=n,this.args=(new RegExp("^"+e.replace(/\*/g,"(.+)")+"$")).exec(this.type),this.args.shift()))}return this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function?this.binder={routine:this.binder}:void 0},t.prototype.observe=function(t,n,r){return e.sightglass(t,n,r,{root:this.view.rootInterface,adapters:this.view.adapters})},t.prototype.parseTarget=function(){var t;return t=e.TypeParser.parse(this.keypath),0===t.type?this.value=t.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target)},t.prototype.formattedValue=function(t){var n,r,i,o,u,a,f,l,c,h,p,d,v,m;for(m=this.formatters,o=h=0,d=m.length;d>h;o=++h){for(u=m[o],i=u.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),a=i.shift(),u=this.view.formatters[a],i=function(){var t,n,s;for(s=[],t=0,n=i.length;n>t;t++)r=i[t],s.push(e.TypeParser.parse(r));return s}(),l=[],n=p=0,v=i.length;v>p;n=++p)r=i[n],l.push(0===r.type?r.value:((c=this.formatterObservers)[o]||(c[o]={}),(f=this.formatterObservers[o][n])?void 0:(f=this.observe(this.view.models,r.value,this.sync),this.formatterObservers[o][n]=f),f.value()));(null!=u?u.read:void 0)instanceof Function?t=u.read.apply(u,[t].concat(s.call(l))):u instanceof Function&&(t=u.apply(null,[t].concat(s.call(l))))}return t},t.prototype.eventHandler=function(e){var t,n;return n=(t=this).view.handler,function(r){return n.call(e,this,r,t)}},t.prototype.set=function(e){var t;return e=e instanceof Function&&!this.binder["function"]?this.formattedValue(e.call(this.model)):this.formattedValue(e),null!=(t=this.binder.routine)?t.call(this,this.el,e):void 0},t.prototype.sync=function(){var e,t;return this.set(function(){var n,r,i,s,o,u,a;if(this.observer){if(this.model!==this.observer.target){for(o=this.dependencies,n=0,i=o.length;i>n;n++)t=o[n],t.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(u=this.options.dependencies)?u.length:void 0))for(a=this.options.dependencies,r=0,s=a.length;s>r;r++)e=a[r],t=this.observe(this.model,e,this.sync),this.dependencies.push(t)}return this.observer.value()}return this.value}.call(this))},t.prototype.publish=function(){var e,t,n,r,i,o,u,a,f;if(this.observer){for(r=this.getValue(this.el),u=this.formatters.slice(0).reverse(),i=0,o=u.length;o>i;i++)t=u[i],e=t.split(/\s+/),n=e.shift(),(null!=(a=this.view.formatters[n])?a.publish:void 0)&&(r=(f=this.view.formatters[n]).publish.apply(f,[r].concat(s.call(e))));return this.observer.setValue(r)}},t.prototype.bind=function(){var e,t,n,r,i,s,o;if(this.parseTarget(),null!=(i=this.binder.bind)&&i.call(this,this.el),null!=this.model&&(null!=(s=this.options.dependencies)?s.length:void 0))for(o=this.options.dependencies,n=0,r=o.length;r>n;n++)e=o[n],t=this.observe(this.model,e,this.sync),this.dependencies.push(t);return this.view.preloadData?this.sync():void 0},t.prototype.unbind=function(){var e,t,n,r,i,s,o,u,a,f;for(null!=(o=this.binder.unbind)&&o.call(this,this.el),null!=(u=this.observer)&&u.unobserve(),a=this.dependencies,i=0,s=a.length;s>i;i++)r=a[i],r.unobserve();this.dependencies=[],f=this.formatterObservers;for(n in f){t=f[n];for(e in t)r=t[e],r.unobserve()}return this.formatterObservers={}},t.prototype.update=function(e){var t,n;return null==e&&(e={}),this.model=null!=(t=this.observer)?t.target:void 0,null!=(n=this.binder.update)?n.call(this,e):void 0},t.prototype.getValue=function(t){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,t):e.Util.getInputValue(t)},t}(),e.ComponentBinding=function(t){function n(e,t,n){var r,s,o,u,f,l,c;for(this.view=e,this.el=t,this.type=n,this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.locals=i(this.locals,this),this.component=this.view.components[this.type],this["static"]={},this.observers={},this.upstreamObservers={},s=e.bindingRegExp(),l=this.el.attributes||[],u=0,f=l.length;f>u;u++)r=l[u],s.test(r.name)||(o=this.camelCase(r.name),a.call(null!=(c=this.component["static"])?c:[],o)>=0?this["static"][o]=r.value:this.observers[o]=r.value)}return u(n,t),n.prototype.sync=function(){},n.prototype.locals=function(){var e,t,n,r,i,s;n={},i=this["static"];for(e in i)r=i[e],n[e]=r;s=this.observers;for(e in s)t=s[e],n[e]=t.value();return n},n.prototype.camelCase=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},n.prototype.bind=function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;if(!this.bound){d=this.observers;for(n in d)r=d[n],this.observers[n]=this.observe(this.view.models,r,function(e){return function(){return e.componentView.models[n]=e.observers[n].value()}}(this));this.bound=!0}if(null!=this.componentView)return this.componentView.bind();for(this.el.innerHTML=this.component.template.call(this),u=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,o={},v=e.extensions,l=0,h=v.length;h>l;l++){if(s=v[l],o[s]={},this.component[s]){m=this.component[s];for(t in m)a=m[t],o[s][t]=a}g=this.view[s];for(t in g)a=g[t],null==(f=o[s])[t]&&(f[t]=a)}for(y=e.options,c=0,p=y.length;p>c;c++)s=y[c],o[s]=null!=(b=this.component[s])?b:this.view[s];this.componentView=new e.View(this.el,u,o),this.componentView.bind(),w=this.observers,E=[];for(n in w)i=w[n],E.push(this.upstreamObservers[n]=this.observe(this.componentView.models,n,function(e){return function(){return i.setValue(e.componentView.models[n])}}(this)));return E},n.prototype.unbind=function(){var e,t,n,r,i;n=this.upstreamObservers;for(e in n)t=n[e],t.unobserve();r=this.observers;for(e in r)t=r[e],t.unobserve();return null!=(i=this.componentView)?i.unbind.call(this):void 0},n}(e.Binding),e.TextBinding=function(e){function t(e,t,n,r,s){this.view=e,this.el=t,this.type=n,this.keypath=r,this.options=null!=s?s:{},this.sync=i(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return u(t,e),t.prototype.binder={routine:function(e,t){return e.data=null!=t?t:""}},t.prototype.sync=function(){return t.__super__.sync.apply(this,arguments)},t}(e.Binding),e["public"].binders.text=function(e,t){return null!=e.textContent?e.textContent=null!=t?t:"":e.innerText=null!=t?t:""},e["public"].binders.html=function(e,t){return e.innerHTML=null!=t?t:""},e["public"].binders.show=function(e,t){return e.style.display=t?"":"none"},e["public"].binders.hide=function(e,t){return e.style.display=t?"none":""},e["public"].binders.enabled=function(e,t){return e.disabled=!t},e["public"].binders.disabled=function(e,t){return e.disabled=!!t},e["public"].binders.checked={publishes:!0,priority:2e3,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)===(null!=t?t.toString():void 0):!!t}},e["public"].binders.unchecked={publishes:!0,priority:2e3,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)!==(null!=t?t.toString():void 0):!t}},e["public"].binders.value={publishes:!0,priority:3e3,bind:function(t){return"INPUT"!==t.tagName||"radio"!==t.type?(this.event="SELECT"===t.tagName?"change":"input",e.Util.bindEvent(t,this.event,this.publish)):void 0},unbind:function(t){return"INPUT"!==t.tagName||"radio"!==t.type?e.Util.unbindEvent(t,this.event,this.publish):void 0},routine:function(e,t){var n,r,i,s,o,u,f;if("INPUT"===e.tagName&&"radio"===e.type)return e.setAttribute("value",t);if(null!=window.jQuery){if(e=jQuery(e),(null!=t?t.toString():void 0)!==(null!=(s=e.val())?s.toString():void 0))return e.val(null!=t?t:"")}else if("select-multiple"===e.type){if(null!=t){for(f=[],r=0,i=e.length;i>r;r++)n=e[r],f.push(n.selected=(o=n.value,a.call(t,o)>=0));return f}}else if((null!=t?t.toString():void 0)!==(null!=(u=e.value)?u.toString():void 0))return e.value=null!=t?t:""}},e["public"].binders["if"]={block:!0,priority:4e3,bind:function(e){var t,n;return null==this.marker?(t=[this.view.prefix,this.type].join("-").replace("--","-"),n=e.getAttribute(t),this.marker=document.createComment(" rivets: "+this.type+" "+n+" "),this.bound=!1,e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)):void 0},unbind:function(){var e;return null!=(e=this.nested)?e.unbind():void 0},routine:function(t,n){var r,i,s,o;if(!!n==!this.bound){if(n){s={},o=this.view.models;for(r in o)i=o[r],s[r]=i;return(this.nested||(this.nested=new 
e.View(t,s,this.view.options()))).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.bound=!0}return t.parentNode.removeChild(t),this.nested.unbind(),this.bound=!1}},update:function(e){var t;return null!=(t=this.nested)?t.update(e):void 0}},e["public"].binders.unless={block:!0,priority:4e3,bind:function(t){return e["public"].binders["if"].bind.call(this,t)},unbind:function(){return e["public"].binders["if"].unbind.call(this)},routine:function(t,n){return e["public"].binders["if"].routine.call(this,t,!n)},update:function(t){return e["public"].binders["if"].update.call(this,t)}},e["public"].binders["on-*"]={"function":!0,priority:1e3,unbind:function(t){return this.handler?e.Util.unbindEvent(t,this.args[0],this.handler):void 0},routine:function(t,n){return this.handler&&e.Util.unbindEvent(t,this.args[0],this.handler),e.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(n))}},e["public"].binders["each-*"]={block:!0,priority:4e3,bind:function(e){var t,n,r,i,s;if(null==this.marker)t=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e);else for(s=this.iterated,r=0,i=s.length;i>r;r++)n=s[r],n.bind()},unbind:function(){var e,t,n,r,i;if(null!=this.iterated){for(r=this.iterated,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.unbind());return i}},routine:function(t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;if(f=this.args[0],n=n||[],this.iterated.length>n.length)for(w=Array(this.iterated.length-n.length),d=0,g=w.length;g>d;d++)s=w[d],p=this.iterated.pop(),p.unbind(),this.marker.parentNode.removeChild(p.els[0]);for(o=v=0,y=n.length;y>v;o=++v)if(a=n[o],i={index:o},i[f]=a,null==this.iterated[o]){E=this.view.models;for(u in E)a=E[u],null==i[u]&&(i[u]=a);c=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,l=this.view.options(),l.preloadData=!0,h=t.cloneNode(!0),p=new e.View(h,i,l),p.bind(),this.iterated.push(p),this.marker.parentNode.insertBefore(h,c.nextSibling)}else this.iterated[o].models[f]!==a&&this.iterated[o].update(i);if("OPTION"===t.nodeName){for(S=this.view.bindings,x=[],m=0,b=S.length;b>m;m++)r=S[m],r.el===this.marker.parentNode&&"value"===r.type?x.push(r.sync()):x.push(void 0);return x}},update:function(e){var t,n,r,i,s,o,u,a;t={};for(n in e)r=e[n],n!==this.args[0]&&(t[n]=r);for(u=this.iterated,a=[],s=0,o=u.length;o>s;s++)i=u[s],a.push(i.update(t));return a}},e["public"].binders["class-*"]=function(e,t){var n;return n=" "+e.className+" ",!t==(-1!==n.indexOf(" "+this.args[0]+" "))?e.className=t?""+e.className+" "+this.args[0]:n.replace(" "+this.args[0]+" "," ").trim():void 0},e["public"].binders["*"]=function(e,t){return null!=t?e.setAttribute(this.type,t):e.removeAttribute(this.type)},e["public"].adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(e){var t,n,r;return e.hasOwnProperty(this.id)||(t=this.counter++,Object.defineProperty(e,this.id,{value:t})),(n=this.weakmap)[r=e[this.id]]||(n[r]={callbacks:{}})},cleanupWeakReference:function(e,t){return Object.keys(e.callbacks).length||e.pointers&&Object.keys(e.pointers).length?void 0:delete this.weakmap[t]},stubFunction:function(e,t){var n,r,i;return r=e[t],n=this.weakReference(e),i=this.weakmap,e[t]=function(){var t,s,o,u,a,f,l,c,h,p;u=r.apply(e,arguments),l=n.pointers;for(o in l)for(s=l[o],p=null!=(c=null!=(h=i[o])?h.callbacks[s]:void 0)?c:[],a=0,f=p.length;f>a;a++)t=p[a],t();return u}},observeMutations:function(e,t,n){var r,i,s,o,u,f;if(Array.isArray(e)){if(s=this.weakReference(e),null==s.pointers)for(s.pointers={},i=["push","pop","shift","unshift","sort","reverse","splice"],u=0,f=i.length;f>u;u++)r=i[u],this.stubFunction(e,r);if(null==(o=s.pointers)[t]&&(o[t]=[]),a.call(s.pointers[t],n)<0)return s.pointers[t].push(n)}},unobserveMutations:function(e,t,n){var r,i,s;return Array.isArray(e)&&null!=e[this.id]&&(i=this.weakmap[e[this.id]])&&(s=i.pointers[t])?((r=s.indexOf(n))>=0&&s.splice(r,1),s.length||delete i.pointers[t],this.cleanupWeakReference(i,e[this.id])):void 0},observe:function(e,t,n){var r,i,s;return r=this.weakReference(e).callbacks,null==r[t]&&(r[t]=[],i=Object.getOwnPropertyDescriptor(e,t),(null!=i?i.get:void 0)||(null!=i?i.set:void 0)||(s=e[t],Object.defineProperty(e,t,{enumerable:!0,get:function(){return s},set:function(i){return function(o){var u,f,l,c;if(o!==s&&(i.unobserveMutations(s,e[i.id],t),s=o,u=i.weakmap[e[i.id]])){if(r=u.callbacks,r[t])for(c=r[t].slice(),f=0,l=c.length;l>f;f++)n=c[f],a.call(r[t],n)>=0&&n();return i.observeMutations(o,e[i.id],t)}}}(this)}))),a.call(r[t],n)<0&&r[t].push(n),this.observeMutations(e[t],e[this.id],t)},unobserve:function(e,t,n){var r,i,s;return(s=this.weakmap[e[this.id]])&&(r=s.callbacks[t])?((i=r.indexOf(n))>=0&&(r.splice(i,1),r.length||delete s.callbacks[t]),this.unobserveMutations(e[t],e[this.id],t),this.cleanupWeakReference(s,e[this.id])):void 0},get:function(e,t){return e[t]},set:function(e,t,n){return e[t]=n}},e.factory=function(t){return e.sightglass=t,e["public"]._=e,e["public"]},"object"==typeof ("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=e.factory(require("sightglass")):"function"==typeof define&&define.amd?define(["sightglass"],function(t){return this.rivets=e.factory(t)}):this.rivets=e.factory(sightglass)}.call(this),!function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():window.noUiSlider=e()}(function(){"use strict";function e(e){return e.filter(function(e){return this[e]?!1:this[e]=!0},{})}function t(e,t){return Math.round(e/t)*t}function n(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement,i=h();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(i.x=0),{top:t.top+i.y-r.clientTop,left:t.left+i.x-r.clientLeft}}function r(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function i(e){var t=Math.pow(10,7);return Number((Math.round(e*t)/t).toFixed(7))}function s(e,t,n){f(e,t),setTimeout(function(){l(e,t)},n)}function o(e){return Math.max(Math.min(e,100),0)}function u(e){return Array.isArray(e)?e:[e]}function a(e){var t=e.split(".");return t.length>1?t[1].length:0}function f(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function l(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function c(e,t){e.classList?e.classList.contains(t):(new RegExp("(^| )"+t+"( |$)","gi")).test(e.className)}function h(){var e=void 0!==window.pageXOffset,t="CSS1Compat"===(document.compatMode||""),n=e?window.pageXOffset:t?document.documentElement.scrollLeft:document.body.scrollLeft,r=e?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop;return{x:n,y:r}}function p(e){e.stopPropagation()}function d(e){return function(t){return e+t}}function v(e,t){return 100/(t-e)}function m(e,t){return 100*t/(e[1]-e[0])}function g(e,t){return m(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}function y(e,t){return t*(e[1]-e[0])/100+e[0]}function b(e,t){for(var n=1;e>=t[n];)n+=1;return n}function w(e,t,n){if(n>=e.slice(-1)[0])return 100;var r,i,s,o,u=b(n,e);return r=e[u-1],i=e[u],s=t[u-1],o=t[u],s+g([r,i],n)/v(s,o)}function E(e,t,n){if(n>=100)return e.slice(-1)[0];var r,i,s,o,u=b(n,t);return r=e[u-1],i=e[u],s=t[u-1],o=t[u],y([r,i],(n-s)*v(s,o))}function S(e,n,r,i){if(100===i)return i;var s,o,u=b(i,e);return r?(s=e[u-1],o=e[u],i-s>(o-s)/2?o:s):n[u-1]?e[u-1]+t(i-e[u-1],n[u-1]):i}function x(e,t,n){var i;if("number"==typeof t&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("noUiSlider: 'range' contains invalid value.");if(i="min"===e?0:"max"===e?100:parseFloat(e),!r(i)||!r(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");n.xPct.push(i),n.xVal.push(t[0]),i?n.xSteps.push(isNaN(t[1])?!1:t[1]):isNaN(t[1])||(n.xSteps[0]=t[1])}function T(e,t,n){return t?void (n.xSteps[e]=m([n.xVal[e],n.xVal[e+1]],t)/v(n.xPct[e],n.xPct[e+1])):!0}function N(e,t,n,r){this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.snap=t,this.direction=n;var i,s=[];for(i in e)e.hasOwnProperty(i)&&s.push([e[i],i]);for(s.length&&"object"==typeof s[0][0]?s.sort(function(e,t){return e[0][0]-t[0][0]}):s.sort(function(e,t){return e[0]-t[0]}),i=0;i<s.length;i++)x(s[i][1],s[i][0],this);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)T(i,this.xNumSteps[i],this)}function C(e,t){if(!r(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function k(e,t){if("object"!=typeof t||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");if(t.min===t.max)throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.");e.spectrum=new N(t,e.snap,e.dir,e.singleStep)}function L(e,t){if(t=u(t),!Array.isArray(t)||!t.length||t.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function A(e,t){if(e.snap=t,"boolean"!=typeof t)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function O(e,t){if(e.animate=t,"boolean"!=typeof t)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function M(e,t){if("lower"===t&&1===e.handles)e.connect=1;else if("upper"===t&&1===e.handles)e.connect=2;else if(t===!0&&2===e.handles)e.connect=3;else{if(t!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");e.connect=0}}function _(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function D(e,t){if(!r(t))throw new Error("noUiSlider: 'margin' option must be numeric.");if(e.margin=e.spectrum.getMargin(t),!e.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function P(e,t){if(!r(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(t),!e.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function H(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1,e.connect=[0,2,1,3][e.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function B(e,t){if("string"!=typeof t)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=t.indexOf("tap")>=0,r=t.indexOf("drag")>=0,i=t.indexOf("fixed")>=0,s=t.indexOf("snap")>=0,o=t.indexOf("hover")>=0;if(r&&!e.connect)throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.");e.events={tap:n||s,drag:r,fixed:i,snap:s,hover:o}}function j(e,t){var n;if(t===!0)for(e.tooltips=[],n=0;n<e.handles;n++)e.tooltips.push(!1);else{if(e.tooltips=u(t),e.dir&&e.tooltips.reverse(),e.tooltips.length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.tooltips.forEach(function(e){if(e!==!1&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})}}function F(e,t){if(e.format=t,"function"==typeof t.to&&"function"==typeof t.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function I(e,t){if(void 0!==t&&"string"!=typeof t)throw new Error("noUiSlider: 'cssPrefix' must be a string.");e.cssPrefix=t}function q(e){var t,n={margin:0,limit:0,animate:!0,format:X};t={step:{r:!1,t:C},start:{r:!0,t:L},connect:{r:!0,t:M},direction:{r:!0,t:H},snap:{r:!1,t:A},animate:{r:!1,t:O},range:{r:!0,t:k},orientation:{r:!1,t:_},margin:{r:!1,t:D},limit:{r:!1,t:P},behaviour:{r:!0,t:B},format:{r:!1,t:F},tooltips:{r:!1,t:j},cssPrefix:{r:!1,t:I}};var r={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"};return Object.keys(t).forEach(function(i){if(void 0===e[i]&&void 0===r[i]){if(t[i].r)throw new Error("noUiSlider: '"+i+"' is required.");return!0}t[i].t(n,void 0===e[i]?r[i]:e[i])}),n.pips=e.pips,n.style=n.ort?"top":"left",n}function R(t,r){function i(e,t,n){var r=e+t[0],i=e+t[1];return n?(0>r&&(i+=Math.abs(r)),i>100&&(r-=i-100),[o(r),o(i)]):[r,i]}function v(e,t){e.preventDefault();var n,r,i=0===e.type.indexOf("touch"),s=0===e.type.indexOf("mouse"),o=0===e.type.indexOf("pointer"),u=e;return 0===e.type.indexOf("MSPointer")&&(o=!0),i&&(n=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY),t=t||h(),(s||o)&&(n=e.clientX+t.x,r=e.clientY+t.y),u.pageOffset=t,u.points=[n,r],u.cursor=s||o,u}function m(e,t){var n=document.createElement("div"),r=document.createElement("div"),i=["-lower","-upper"];return e&&i.reverse(),f(r,rt[3]),f(r,rt[3]+i[t]),f(n,rt[2]),n.appendChild(r),n}function g(e,t,n){switch(e){case 1:f(t,rt[7]),f(n[0],rt[6]);break;case 3:f(n[1],rt[6]);case 2:f(n[0],rt[7]);case 0:f(t,rt[6])}}function y(e,t,n){var r,i=[];for(r=0;e>r;r+=1)i.push(n.appendChild(m(t,r)));return i}function b(e,t,n){f(n,rt[0]),f(n,rt[8+e]),f(n,rt[4+t]);var r=document.createElement("div");return f(r,rt[1]),n.appendChild(r),r}function w(e){var t=document.createElement("div");return t.className=rt[18],e.firstChild.appendChild(t)}function E(){var e=Q.map(w);r.dir&&e.reverse(),V("update",function(t,n,i){e[n].innerHTML=r.tooltips[n]?r.tooltips[n].to(i[n]):t[n]})}function S(e,t,n){if("range"===e||"steps"===e)return et.xVal;if("count"===e){var r,i=100/(t-1),s=0;for(t=[];(r=s++*i)<=100;)t.push(r);e="positions"}return"positions"===e?t.map(function(e){return et.fromStepping(n?et.getStep(e):e)}):"values"===e?n?t.map(function(e){return et.fromStepping(et.getStep(et.toStepping(e)))}):t:void 0}function x(t,n,r){function i(e,t){return(e+t).toFixed(7)/1}var s=et.direction,o={},u=et.xVal[0],a=et.xVal[et.xVal.length-1],f=!1,l=!1,c=0;return et.direction=0,r=e(r.slice().sort(function(e,t){return e-t})),r[0]!==u&&(r.unshift(u),f=!0),r[r.length-1]!==a&&(r.push(a),l=!0),r.forEach(function(e,s){var u,a,h,p,d,v,m,g,y,b,w=e,E=r[s+1];if("steps"===n&&(u=et.xNumSteps[s]),u||(u=E-w),w!==!1&&void 0!==E)for(a=w;E>=a;a=i(a,u)){for(p=et.toStepping(a),d=p-c,g=d/t,y=Math.round(g),b=d/y,h=1;y>=h;h+=1)v=c+h*b,o[v.toFixed(5)]=["x",0];m=r.indexOf(a)>-1?1:"steps"===n?2:0,!s&&f&&(m=0),a===E&&l||(o[p.toFixed(5)]=[a,m]),c=p}}),et.direction=s,o}function T(e,t,n){function i(e){return["-normal","-large","-sub"][e]}function s(e,t,n){return'class="'+t+" "+t+"-"+u+" "+t+i(n[1])+'" style="'+r.style+": "+e+'%"'}function o(e,r){et.direction&&(e=100-e),r[1]=r[1]&&t?t(r[0],r[1]):r[1],a.innerHTML+="<div "+s(e,rt[21],r)+"></div>",r[1]&&(a.innerHTML+="<div "+s(e,rt[22],r)+">"+n.to(r[0])+"</div>")}var u=["horizontal","vertical"][r.ort],a=document.createElement("div");return f(a,rt[20]),f(a,rt[20]+"-"+u),Object.keys(e).forEach(function(t){o(t,e[t])}),a}function N(e){var t=e.mode,n=e.density||1,r=e.filter||!1,i=e.values||!1,s=e.stepped||!1,o=S(t,i,s),u=x(n,t,o),a=e.format||{to:Math.round};return Y.appendChild(T(u,r,a))}function C(){return K["offset"+["Width","Height"][r.ort]]}function k(e,t,n){void 0!==t&&1!==r.handles&&(t=Math.abs(t-r.dir)),Object.keys(nt).forEach(function(r){var i=r.split(".")[0];e===i&&nt[r].forEach(function(e){e.call(G,u(R()),t,u(L(Array.prototype.slice.call(tt))),n||!1)})})}function L(e){return 1===e.length?e[0]:r.dir?e.reverse():e}function A(e,t,n,i){var s=function(t){return Y.hasAttribute("disabled")?!1:c(Y,rt[14])?!1:(t=v(t,i.pageOffset),e===z.start&&void 0!==t.buttons&&t.buttons>1?!1:i.hover&&t.buttons?!1:(t.calcPoint=t.points[r.ort],void n(t,i)))},o=[];return e.split(" ").forEach(function(e){t.addEventListener(e,s,!1),o.push([e,s])}),o}function O(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return M(e,t);var n,r,s=t.handles||Q,o=!1,u=100*(e.calcPoint-t.start)/t.baseSize,a=s[0]===Q[0]?0:1;if(n=i(u,t.positions,s.length>1),o=j(s[0],n[a],1===s.length),s.length>1){if(o=j(s[1],n[a?0:1],!1)||o)for(r=0;r<t.handles.length;r++)k("slide",r)}else o&&k("slide",a)}function M(e,t){var n=K.querySelector("."+rt[15]),r=t.handles[0]===Q[0]?0:1;null!==n&&l(n,rt[15]),e.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var i=document.documentElement;i.noUiListeners.forEach(function(e){i.removeEventListener(e[0],e[1])}),l(Y,rt[12]),k("set",r),k("change",r),void 0!==t.handleNumber&&k("end",t.handleNumber)}function _(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&M(e,t)}function D(e,t){var n=document.documentElement;if(1===t.handles.length&&(f(t.handles[0].children[0],rt[15]),t.handles[0].hasAttribute("disabled")))return!1;e.preventDefault(),e.stopPropagation();var r=A(z.move,n,O,{start:e.calcPoint,baseSize:C(),pageOffset:e.pageOffset,handles:t.handles,handleNumber:t.handleNumber,buttonsProperty:e.buttons,positions:[Z[0],Z[Q.length-1]]}),i=A(z.end,n,M,{handles:t.handles,handleNumber:t.handleNumber}),s=A("mouseout",n,_,{handles:t.handles,handleNumber:t.handleNumber});if(n.noUiListeners=r.concat(i,s),e.cursor){document.body.style.cursor=getComputedStyle(e.target).cursor,Q.length>1&&f(Y,rt[12]);var o=function(){return!1};document.body.noUiListener=o,document.body.addEventListener("selectstart",o,!1)}void 0!==t.handleNumber&&k("start",t.handleNumber)}function P(e){var t,i,o=e.calcPoint,u=0;return e.stopPropagation(),Q.forEach(function(e){u+=n(e)[r.style]}),t=u/2>o||1===Q.length?0:1,o-=n(K)[r.style],i=100*o/C(),r.events.snap||s(Y,rt[14],300),Q[t].hasAttribute("disabled")?!1:(j(Q[t],i),k("slide",t,!0),k("set",t,!0),k("change",t,!0),void (r.events.snap&&D(e,{handles:[Q[t]]})))}function H(e){var t=e.calcPoint-n(K)[r.style],i=et.getStep(100*t/C()),s=et.fromStepping(i);Object.keys(nt).forEach(function(e){"hover"===e.split(".")[0]&&nt[e].forEach(function(e){e.call(G,s)})})}function B(e){var t,n;if(!e.fixed)for(t=0;t<Q.length;t+=1)A(z.start,Q[t].children[0],D,{handles:[Q[t]],handleNumber:t});if(e.tap&&A(z.start,K,P,{handles:Q}),e.hover)for(A(z.move,K,H,{hover:!0}),t=0;t<Q.length;t+=1)["mousemove MSPointerMove pointermove"].forEach(function(e){Q[t].children[0].addEventListener(e,p,!1)});e.drag&&(n=[K.querySelector("."+rt[7])],f(n[0],rt[10]),e.fixed&&n.push(Q[n[0]===Q[0]?1:0].children[0]),n.forEach(function(e){A(z.start,e,D,{handles:Q})}))}function j(e,t,n){var i=e!==Q[0]?1:0,s=Z[0]+r.margin,u=Z[1]-r.margin,a=Z[0]+r.limit,c=Z[1]-r.limit;return Q.length>1&&(t=i?Math.max(t,s):Math.min(t,u)),n!==!1&&r.limit&&Q.length>1&&(t=i?Math.min(t,a):Math.max(t,c)),t=et.getStep(t),t=o(parseFloat(t.toFixed(7))),t===Z[i]?!1:(window.requestAnimationFrame?window.requestAnimationFrame(function(){e.style[r.style]=t+"%"}):e.style[r.style]=t+"%",e.previousSibling||(l(e,rt[17]),t>50&&f(e,rt[17])),Z[i]=t,tt[i]=et.fromStepping(t),k("update",i),!0)}function F(e,t){var n,i,s;for(r.limit&&(e+=1),n=0;e>n;n+=1)i=n%2,s=t[i],null!==s&&s!==!1&&("number"==typeof s&&(s=String(s)),s=r.format.from(s),(s===!1||isNaN(s)||j(Q[i],et.toStepping(s),n===3-r.dir)===!1)&&k("update",i))}function I(e){var t,n,i=u(e);for(r.dir&&r.handles>1&&i.reverse(),r.animate&&-1!==Z[0]&&s(Y,rt[14],300),t=Q.length>1?3:1,1===i.length&&(t=1),F(t,i),n=0;n<Q.length;n++)k("set",n)}function R(){var e,t=[];for(e=0;e<r.handles;e+=1)t[e]=r.format.to(tt[e]);return L(t)}function U(){rt.forEach(function(e){e&&l(Y,e)}),Y.innerHTML="",delete Y.noUiSlider}function X(){var e=Z.map(function(e,t){var n=et.getApplicableStep(e),r=a(String(n[2])),i=tt[t],s=100===e?null:n[2],o=Number((i-n[2]).toFixed(r)),u=0===e?null:o>=n[1]?n[2]:n[0]||!1;return[u,s]});return L(e)}function V(e,t){nt[e]=nt[e]||[],nt[e].push(t),"update"===e.split(".")[0]&&Q.forEach(function(e,t){k("update",t)})}function $(e){var t=e.split(".")[0],n=e.substring(t.length);Object.keys(nt).forEach(function(e){var r=e.split(".")[0],i=e.substring(r.length);t&&t!==r||n&&n!==i||delete nt[e]})}function J(e){var t,n=R(),i=q({start:[0,0],margin:e.margin,limit:e.limit,step:e.step,range:e.range,animate:e.animate,snap:void 0===e.snap?r.snap:e.snap});for(["margin","limit","step","range","animate"].forEach(function(t){void 0!==e[t]&&(r[t]=e[t])}),et=i.spectrum,Z=[-1,-1],I(n),t=0;t<Q.length;t++)k("update",t)}var K,Q,G,Y=t,Z=[-1,-1],et=r.spectrum,tt=[],nt={},rt=["target","base","origin","handle","horizontal","vertical","background","connect","ltr","rtl","draggable","","state-drag","","state-tap","active","","stacking","tooltip","","pips","marker","value"].map(d(r.cssPrefix||W));if(Y.noUiSlider)throw new Error("Slider was already initialized.");return K=b(r.dir,r.ort,Y),Q=y(r.handles,r.dir,K),g(r.connect,Y,Q),r.pips&&N(r.pips),r.tooltips&&E(),G={destroy:U,steps:X,on:V,off:$,get:R,set:I,updateOptions:J},B(r.events),G}function U(e,t){if(!e.nodeName)throw new Error("noUiSlider.create requires a single element.");var n=q(t,e),r=R(e,n);return r.set(n.start),e.noUiSlider=r,r}var z=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},W="noUi-";N.prototype.getMargin=function(e){return 2===this.xPct.length?m(this.xVal,e):!1},N.prototype.toStepping=function(e){return e=w(this.xVal,this.xPct,e),this.direction&&(e=100-e),e},N.prototype.fromStepping=function(e){return this.direction&&(e=100-e),i(E(this.xVal,this.xPct,e))},N.prototype.getStep=function(e){return this.direction&&(e=100-e),e=S(this.xPct,this.xSteps,this.snap,e),this.direction&&(e=100-e),e},N.prototype.getApplicableStep=function(e){var t=b(e,this.xPct),n=100===e?2:1;return[this.xNumSteps[t-2],this.xVal[t-n],this.xNumSteps[t-n]]},N.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var X={to:function(e){return void 0!==e&&e.toFixed(2)},from:Number};return{create:U}}),function(){"use strict";function t(e){return e.split("").reverse().join("")}function n(e,t){return e.substring(0,t.length)===t}function r(e,t){return e.slice(-1*t.length)===t}function i(e,t,n){if((e[t]||e[n])&&e[t]===e[n])throw new Error(t)}function s(e){return typeof e=="number"&&isFinite(e)}function o(e,t){var n=Math.pow(10,t);return(Math.round(e*n)/n).toFixed(t)}function u(e,n,r,i,u,a,f,l,c,h,p,d){var v=d,m,g,y,b="",w="";return a&&(d=a(d)),s(d)?(e!==!1&&parseFloat(d.toFixed(e))===0&&(d=0),d<0&&(m=!0,d=Math.abs(d)),e!==!1&&(d=o(d,e)),d=d.toString(),d.indexOf(".")!==-1?(g=d.split("."),y=g[0],r&&(b=r+g[1])):y=d,n&&(y=t(y).match(/.{1,3}/g),y=t(y.join(t(n)))),m&&l&&(w+=l),i&&(w+=i),m&&c&&(w+=c),w+=y,w+=b,u&&(w+=u),h&&(w=h(w,v)),w):!1}function a(e,t,i,o,u,a,f,l,c,h,p,d){var v=d,m,g="";return p&&(d=p(d)),!d||typeof d!="string"?!1:(l&&n(d,l)&&(d=d.replace(l,""),m=!0),o&&n(d,o)&&(d=d.replace(o,"")),c&&n(d,c)&&(d=d.replace(c,""),m=!0),u&&r(d,u)&&(d=d.slice(0,-1*u.length)),t&&(d=d.split(t).join("")),i&&(d=d.replace(i,".")),m&&(g+="-"),g+=d,g=g.replace(/[^0-9\.\-.]/g,""),g===""?!1:(g=Number(g),f&&(g=f(g)),s(g)?g:!1))}function f(t){var n,r,s,o={};for(n=0;n<e.length;n+=1){r=e[n],s=t[r];if(s===undefined)r==="negative"&&!o.negativeBefore?o[r]="-":r==="mark"&&o.thousand!=="."?o[r]=".":o[r]=!1;else if(r==="decimals"){if(!(s>=0&&s<8))throw new Error(r);o[r]=s}else if(r==="encoder"||r==="decoder"||r==="edit"||r==="undo"){if(typeof s!="function")throw new Error(r);o[r]=s}else{if(typeof s!="string")throw new Error(r);o[r]=s}}return i(o,"mark","thousand"),i(o,"prefix","negative"),i(o,"prefix","negativeBefore"),o}function l(t,n,r){var i,s=[];for(i=0;i<e.length;i+=1)s.push(t[e[i]]);return s.push(r),n.apply("",s)}function c(e){if(!(this instanceof c))return new c(e);if(typeof e!="object")return;e=f(e),this.to=function(t){return l(e,u,t)},this.from=function(t){return l(e,a,t)}}var e=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=c}(),!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,r){var i={features:null,bind:function(e,t,n,r){var i=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var s=0;s<t.length;s++)t[s]&&e[i](t[s],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){i.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){i.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&(new RegExp("(^|\\s)"+t+"(\\s|$)")).test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(i.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(i.features)return i.features;var e=i.createEl(),t=e.style,n="",r={};if(r.oldIE=document.all&&!document.addEventListener,r.touch="ontouchstart"in window,window.requestAnimationFrame&&(r.raf=window.requestAnimationFrame,r.caf=window.cancelAnimationFrame),r.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!r.pointerEvent){var s=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var o=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);o&&o.length>0&&(o=parseInt(o[1],10),o>=1&&8>o&&(r.isOldIOSPhone=!0))}var u=s.match(/Android\s([0-9\.]*)/),a=u?u[1]:0;a=parseFloat(a),a>=1&&(4.4>a&&(r.isOldAndroid=!0),r.androidVersion=a),r.isMobileOpera=/opera mini|opera mobi/i.test(s)}for(var f,l,c=["transform","perspective","animationName"],h=["","webkit","Moz","ms","O"],p=0;4>p;p++){n=h[p];for(var d=0;3>d;d++)f=c[d],l=n+(n?f.charAt(0).toUpperCase()+f.slice(1):f),!r[f]&&l in t&&(r[f]=l);n&&!r.raf&&(n=n.toLowerCase(),r.raf=window[n+"RequestAnimationFrame"],r.raf&&(r.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!r.raf){var v=0;r.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-v)),r=window.setTimeout(function(){e(t+n)},n);return v=t+n,r},r.caf=function(e){clearTimeout(e)}}return r.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i.features=r,r}};i.detectFeatures(),i.features.oldIE&&(i.bind=function(e,t,n,r){t=t.split(" ");for(var i,s=(r?"detach":"attach")+"Event",o=function(){n.handleEvent.call(n)},u=0;u<t.length;u++)if(i=t[u])if("object"==typeof n&&n.handleEvent){if(r){if(!n["oldIE"+i])return!1}else n["oldIE"+i]=o;e[s]("on"+i,n["oldIE"+i])}else e[s]("on"+i,n)});var s=this,o=25,u=3,a={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};i.extend(a,r);var f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct=function(){return{x:0,y:0}},ht=ct(),pt=ct(),dt=ct(),vt={},mt=0,gt={},yt=ct(),bt=0,wt=!0,Et=[],St={},xt=!1,Tt=function(e,t){i.extend(s,t.publicMethods),Et.push(e)},Nt=function(e){var t=er();return e>t-1?e-t:0>e?t+e:e},Ct={},kt=function(e,t){return Ct[e]||(Ct[e]=[]),Ct[e].push(t)},Lt=function(e){var t=Ct[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(s,n)}},At=function(){return(new Date).getTime()},Ot=function(e){at=e,s.bg.style.opacity=e*a.bgOpacity},Mt=function(e,t,n,r,i){(!xt||i&&i!==s.currItem)&&(r/=i?i.fitRatio:s.currItem.fitRatio),e[O]=w+t+"px, "+n+"px"+E+" scale("+r+")"},_t=function(e){rt&&(e&&(y>s.currItem.fitRatio?xt||(hr(s.currItem,!1,!0),xt=!0):xt&&(hr(s.currItem),xt=!1)),Mt(rt,dt.x,dt.y,y))},Dt=function(e){e.container&&Mt(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Pt=function(e,t){t[O]=w+e+"px, 0px"+E},Ht=function(e,t){if(!a.loop&&t){var n=h+(yt.x*mt-e)/yt.x,r=Math.round(e-bn.x);(0>n&&r>0||n>=er()-1&&0>r)&&(e=bn.x+r*a.mainScrollEndFriction)}bn.x=e,Pt(e,p)},Bt=function(e,t){var n=wn[e]-gt[e];return pt[e]+ht[e]+n-n*(t/b)},jt=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ft=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},It=null,qt=function(){It&&(i.unbind(document,"mousemove",qt),i.addClass(e,"pswp--has_mouse"),a.mouseUsed=!0,Lt("mouseUsed")),It=setTimeout(function(){It=null},100)},Rt=function(){i.bind(document,"keydown",s),I.transform&&i.bind(s.scrollWrap,"click",s),a.mouseUsed||i.bind(document,"mousemove",qt),i.bind(window,"resize scroll",s),Lt("bindEvents")},Ut=function(){i.unbind(window,"resize",s),i.unbind(window,"scroll",g.scroll),i.unbind(document,"keydown",s),i.unbind(document,"mousemove",qt),I.transform&&i.unbind(s.scrollWrap,"click",s),V&&i.unbind(window,v,s),Lt("unbindEvents")},zt=function(e,t){var n=ar(s.currItem,vt,e);return t&&(nt=n),n},Wt=function(e){return e||(e=s.currItem),e.initialZoomLevel},Xt=function(e){return e||(e=s.currItem),e.w>0?a.maxSpreadZoom:1},Vt=function(e,t,n,r){return r===s.currItem.initialZoomLevel?(n[e]=s.currItem.initialPosition[e],!0):(n[e]=Bt(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]?(n[e]=t.max[e],!0):!1)},$t=function(){if(O){var t=I.perspective&&!_;return w="translate"+(t?"3d(":"("),void (E=I.perspective?", 0px)":")")}O="left",i.addClass(e,"pswp--ie"),Pt=function(e,t){t.left=e+"px"},Dt=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,i=t*e.h;n.width=r+"px",n.height=i+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},_t=function(){if(rt){var e=rt,t=s.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,i=n*t.h;e.width=r+"px",e.height=i+"px",e.left=dt.x+"px",e.top=dt.y+"px"}}},Jt=function(e){var t="";a.escKey&&27===e.keyCode?t="close":a.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,s[t]()))},Kt=function(e){e&&(K||J||it||W)&&(e.preventDefault(),e.stopPropagation())},Qt=function(){s.setScrollOffset(0,i.getScrollY())},Gt={},Yt=0,Zt=function(e){Gt[e]&&(Gt[e].raf&&P(Gt[e].raf),Yt--,delete Gt[e])},en=function(e){Gt[e]&&Zt(e),Gt[e]||(Yt++,Gt[e]={})},tn=function(){for(var e in Gt)Gt.hasOwnProperty(e)&&Zt(e)},nn=function(e,t,n,r,i,s,o){var u,a=At();en(e);var f=function(){if(Gt[e]){if(u=At()-a,u>=r)return Zt(e),s(n),void (o&&o());s((n-t)*i(u/r)+t),Gt[e].raf=D(f)}};f()},rn={shout:Lt,listen:kt,viewportSize:vt,options:a,isMainScrollAnimating:function(){return it},getZoomLevel:function(){return y},getCurrentIndex:function(){return h},isDragging:function(){return V},isZooming:function(){return Z},setScrollOffset:function(e,t){gt.x=e,F=gt.y=t,Lt("updateScrollOffset",gt)},applyZoomPan:function(e,t,n,r){dt.x=t,dt.y=n,y=e,_t(r)},init:function(){if(!f&&!l){var n;s.framework=i,s.template=e,s.bg=i.getChildByClass(e,"pswp__bg"),H=e.className,f=!0,I=i.detectFeatures(),D=I.raf,P=I.caf,O=I.transform,j=I.oldIE,s.scrollWrap=i.getChildByClass(e,"pswp__scroll-wrap"),s.container=i.getChildByClass(s.scrollWrap,"pswp__container"),p=s.container.style,s.itemHolders=T=[{el:s.container.children[0],wrap:0,index:-1},{el:s.container.children[1],wrap:0,index:-1},{el:s.container.children[2],wrap:0,index:-1}],T[0].el.style.display=T[2].el.style.display="none",$t(),g={resize:s.updateSize,scroll:Qt,keydown:Jt,click:Kt};var r=I.isOldIOSPhone||I.isOldAndroid||I.isMobileOpera;for(I.animationName&&I.transform&&!r||(a.showAnimationDuration=a.hideAnimationDuration=0),n=0;n<Et.length;n++)s["init"+Et[n]]();if(t){var o=s.ui=new t(s,i);o.init()}Lt("firstUpdate"),h=h||a.index||0,(isNaN(h)||0>h||h>=er())&&(h=0),s.currItem=Zn(h),(I.isOldIOSPhone||I.isOldAndroid)&&(wt=!1),e.setAttribute("aria-hidden","false"),a.modal&&(wt?e.style.position="fixed":(e.style.position="absolute",e.style.top=i.getScrollY()+"px")),void 0===F&&(Lt("initialLayout"),F=B=i.getScrollY());var c="pswp--open ";for(a.mainClass&&(c+=a.mainClass+" "),a.showHideOpacity&&(c+="pswp--animate_opacity "),c+=_?"pswp--touch":"pswp--notouch",c+=I.animationName?" pswp--css_animation":"",c+=I.svg?" pswp--svg":"",i.addClass(e,c),s.updateSize(),d=-1,bt=null,n=0;u>n;n++)Pt((n+d)*yt.x,T[n].el.style);j||i.bind(s.scrollWrap
,m,s),kt("initialZoomInEnd",function(){s.setContent(T[0],h-1),s.setContent(T[2],h+1),T[0].el.style.display=T[2].el.style.display="block",a.focus&&e.focus(),Rt()}),s.setContent(T[1],h),s.updateCurrItem(),Lt("afterInit"),wt||(S=setInterval(function(){Yt||V||Z||y!==s.currItem.initialZoomLevel||s.updateSize()},1e3)),i.addClass(e,"pswp--visible")}},close:function(){f&&(f=!1,l=!0,Lt("close"),Ut(),nr(s.currItem,null,!0,s.destroy))},destroy:function(){Lt("destroy"),Kn&&clearTimeout(Kn),e.setAttribute("aria-hidden","true"),e.className=H,S&&clearInterval(S),i.unbind(s.scrollWrap,m,s),i.unbind(window,"scroll",s),Nn(),tn(),Ct=null},panTo:function(e,t,n){n||(e>nt.min.x?e=nt.min.x:e<nt.max.x&&(e=nt.max.x),t>nt.min.y?t=nt.min.y:t<nt.max.y&&(t=nt.max.y)),dt.x=e,dt.y=t,_t()},handleEvent:function(e){e=e||window.event,g[e.type]&&g[e.type](e)},goTo:function(e){e=Nt(e);var t=e-h;bt=t,h=e,s.currItem=Zn(h),mt-=t,Ht(yt.x*mt),tn(),it=!1,s.updateCurrItem()},next:function(){s.goTo(h+1)},prev:function(){s.goTo(h-1)},updateCurrZoomItem:function(e){if(e&&Lt("beforeChange",0),T[1].el.children.length){var t=T[1].el.children[0];rt=i.hasClass(t,"pswp__zoom-wrap")?t.style:null}else rt=null;nt=s.currItem.bounds,b=y=s.currItem.initialZoomLevel,dt.x=nt.center.x,dt.y=nt.center.y,e&&Lt("afterChange")},invalidateCurrItems:function(){x=!0;for(var e=0;u>e;e++)T[e].item&&(T[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==bt){var t,n=Math.abs(bt);if(!(e&&2>n)){s.currItem=Zn(h),xt=!1,Lt("beforeChange",bt),n>=u&&(d+=bt+(bt>0?-u:u),n=u);for(var r=0;n>r;r++)bt>0?(t=T.shift(),T[u-1]=t,d++,Pt((d+2)*yt.x,t.el.style),s.setContent(t,h-n+r+1+1)):(t=T.pop(),T.unshift(t),d--,Pt(d*yt.x,t.el.style),s.setContent(t,h+n-r-1-1));if(rt&&1===Math.abs(bt)){var i=Zn(N);i.initialZoomLevel!==y&&(ar(i,vt),hr(i),Dt(i))}bt=0,s.updateCurrZoomItem(),N=h,Lt("afterChange")}}},updateSize:function(t){if(!wt&&a.modal){var n=i.getScrollY();if(F!==n&&(e.style.top=n+"px",F=n),!t&&St.x===window.innerWidth&&St.y===window.innerHeight)return;St.x=window.innerWidth,St.y=window.innerHeight,e.style.height=St.y+"px"}if(vt.x=s.scrollWrap.clientWidth,vt.y=s.scrollWrap.clientHeight,Qt(),yt.x=vt.x+Math.round(vt.x*a.spacing),yt.y=vt.y,Ht(yt.x*mt),Lt("beforeResize"),void 0!==d){for(var r,o,f,l=0;u>l;l++)r=T[l],Pt((l+d)*yt.x,r.el.style),f=h+l-1,a.loop&&er()>2&&(f=Nt(f)),o=Zn(f),o&&(x||o.needsUpdate||!o.bounds)?(s.cleanSlide(o),s.setContent(r,f),1===l&&(s.currItem=o,s.updateCurrZoomItem(!0)),o.needsUpdate=!1):-1===r.index&&f>=0&&s.setContent(r,f),o&&o.container&&(ar(o,vt),hr(o),Dt(o));x=!1}b=y=s.currItem.initialZoomLevel,nt=s.currItem.bounds,nt&&(dt.x=nt.center.x,dt.y=nt.center.y,_t(!0)),Lt("resize")},zoomTo:function(e,t,n,r,s){t&&(b=y,wn.x=Math.abs(t.x)-dt.x,wn.y=Math.abs(t.y)-dt.y,jt(pt,dt));var o=zt(e,!1),u={};Vt("x",o,u,e),Vt("y",o,u,e);var a=y,f={x:dt.x,y:dt.y};Ft(u);var l=function(t){1===t?(y=e,dt.x=u.x,dt.y=u.y):(y=(e-a)*t+a,dt.x=(u.x-f.x)*t+f.x,dt.y=(u.y-f.y)*t+f.y),s&&s(t),_t(1===t)};n?nn("customZoomTo",0,1,n,r||i.easing.sine.inOut,l):l(1)}},sn=30,on=10,un={},an={},fn={},ln={},cn={},hn=[],pn={},dn=[],vn={},mn=0,gn=ct(),yn=0,bn=ct(),wn=ct(),En=ct(),Sn=function(e,t){return e.x===t.x&&e.y===t.y},xn=function(e,t){return Math.abs(e.x-t.x)<o&&Math.abs(e.y-t.y)<o},Tn=function(e,t){return vn.x=Math.abs(e.x-t.x),vn.y=Math.abs(e.y-t.y),Math.sqrt(vn.x*vn.x+vn.y*vn.y)},Nn=function(){Q&&(P(Q),Q=null)},Cn=function(){V&&(Q=D(Cn),Un())},kn=function(){return"fit"!==a.scaleMode||y!==s.currItem.initialZoomLevel},Ln=function(e,t){return e&&e!==document?e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1?!1:t(e)?e:Ln(e.parentNode,t):!1},An={},On=function(e,t){return An.prevent=!Ln(e.target,a.isClickableElement),Lt("preventDragEvent",e,t,An),An.prevent},Mn=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},_n=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Dn=function(e,t,n){if(e-R>50){var r=dn.length>2?dn.shift():{};r.x=t,r.y=n,dn.push(r),R=e}},Pn=function(){var e=dt.y-s.currItem.initialPosition.y;return 1-Math.abs(e/(vt.y/2))},Hn={},Bn={},jn=[],Fn=function(e){for(;jn.length>0;)jn.pop();return M?(lt=0,hn.forEach(function(e){0===lt?jn[0]=e:1===lt&&(jn[1]=e),lt++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(jn[0]=Mn(e.touches[0],Hn),e.touches.length>1&&(jn[1]=Mn(e.touches[1],Bn))):(Hn.x=e.pageX,Hn.y=e.pageY,Hn.id="",jn[0]=Hn),jn},In=function(e,t){var n,r,i,o,u=0,f=dt[e]+t[e],l=t[e]>0,c=bn.x+t.x,h=bn.x-pn.x;return n=f>nt.min[e]||f<nt.max[e]?a.panEndFriction:1,f=dt[e]+t[e]*n,!a.allowPanToNext&&y!==s.currItem.initialZoomLevel||(rt?"h"!==st||"x"!==e||J||(l?(f>nt.min[e]&&(n=a.panEndFriction,u=nt.min[e]-f,r=nt.min[e]-pt[e]),(0>=r||0>h)&&er()>1?(o=c,0>h&&c>pn.x&&(o=pn.x)):nt.min.x!==nt.max.x&&(i=f)):(f<nt.max[e]&&(n=a.panEndFriction,u=f-nt.max[e],r=pt[e]-nt.max[e]),(0>=r||h>0)&&er()>1?(o=c,h>0&&c<pn.x&&(o=pn.x)):nt.min.x!==nt.max.x&&(i=f))):o=c,"x"!==e)?void (it||G||y>s.currItem.fitRatio&&(dt[e]+=t[e]*n)):(void 0!==o&&(Ht(o,!0),G=o===pn.x?!1:!0),nt.min.x!==nt.max.x&&(void 0!==i?dt.x=i:G||(dt.x+=t.x*n)),void 0!==o)},qn=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Yn)return void e.preventDefault();if(!X||"mousedown"!==e.type){if(On(e,!0)&&e.preventDefault(),Lt("pointerDown"),M){var t=i.arraySearch(hn,e.pointerId,"id");0>t&&(t=hn.length),hn[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Fn(e),r=n.length;Y=null,tn(),V&&1!==r||(V=ot=!0,i.bind(window,v,s),z=ft=ut=W=G=K=$=J=!1,st=null,Lt("firstTouchStart",n),jt(pt,dt),ht.x=ht.y=0,jt(ln,n[0]),jt(cn,ln),pn.x=yt.x*mt,dn=[{x:ln.x,y:ln.y}],R=q=At(),zt(y,!0),Nn(),Cn()),!Z&&r>1&&!it&&!G&&(b=y,J=!1,Z=$=!0,ht.y=ht.x=0,jt(pt,dt),jt(un,n[0]),jt(an,n[1]),_n(un,an,En),wn.x=Math.abs(En.x)-dt.x,wn.y=Math.abs(En.y)-dt.y,et=tt=Tn(un,an))}}},Rn=function(e){if(e.preventDefault(),M){var t=i.arraySearch(hn,e.pointerId,"id");if(t>-1){var n=hn[t];n.x=e.pageX,n.y=e.pageY}}if(V){var r=Fn(e);if(st||K||Z)Y=r;else if(bn.x!==yt.x*mt)st="h";else{var s=Math.abs(r[0].x-ln.x)-Math.abs(r[0].y-ln.y);Math.abs(s)>=on&&(st=s>0?"h":"v",Y=r)}}},Un=function(){if(Y){var e=Y.length;if(0!==e)if(jt(un,Y[0]),fn.x=un.x-ln.x,fn.y=un.y-ln.y,Z&&e>1){if(ln.x=un.x,ln.y=un.y,!fn.x&&!fn.y&&Sn(Y[1],an))return;jt(an,Y[1]),J||(J=!0,Lt("zoomGestureStarted"));var t=Tn(un,an),n=$n(t);n>s.currItem.initialZoomLevel+s.currItem.initialZoomLevel/15&&(ft=!0);var r=1,i=Wt(),o=Xt();if(i>n)if(a.pinchToClose&&!ft&&b<=s.currItem.initialZoomLevel){var u=i-n,f=1-u/(i/1.2);Ot(f),Lt("onPinchClose",f),ut=!0}else r=(i-n)/i,r>1&&(r=1),n=i-r*(i/3);else n>o&&(r=(n-o)/(6*i),r>1&&(r=1),n=o+r*i);0>r&&(r=0),et=t,_n(un,an,gn),ht.x+=gn.x-En.x,ht.y+=gn.y-En.y,jt(En,gn),dt.x=Bt("x",n),dt.y=Bt("y",n),z=n>y,y=n,_t()}else{if(!st)return;if(ot&&(ot=!1,Math.abs(fn.x)>=on&&(fn.x-=Y[0].x-cn.x),Math.abs(fn.y)>=on&&(fn.y-=Y[0].y-cn.y)),ln.x=un.x,ln.y=un.y,0===fn.x&&0===fn.y)return;if("v"===st&&a.closeOnVerticalDrag&&!kn()){ht.y+=fn.y,dt.y+=fn.y;var l=Pn();return W=!0,Lt("onVerticalDrag",l),Ot(l),void _t()}Dn(At(),un.x,un.y),K=!0,nt=s.currItem.bounds;var c=In("x",fn);c||(In("y",fn),Ft(dt),_t())}}},zn=function(e){if(I.isOldAndroid){if(X&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(X),X=setTimeout(function(){X=0},600))}Lt("pointerUp"),On(e,!1)&&e.preventDefault();var t;if(M){var n=i.arraySearch(hn,e.pointerId,"id");if(n>-1)if(t=hn.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var r={4:"mouse",2:"touch",3:"pen"};t.type=r[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var o,u=Fn(e),f=u.length;if("mouseup"===e.type&&(f=0),2===f)return Y=null,!0;1===f&&jt(cn,u[0]),0!==f||st||it||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Lt("touchRelease",e,t));var l=-1;if(0===f&&(V=!1,i.unbind(window,v,s),Nn(),Z?l=0:-1!==yn&&(l=At()-yn)),yn=1===f?At():-1,o=-1!==l&&150>l?"zoom":"swipe",Z&&2>f&&(Z=!1,1===f&&(o="zoomPointerUp"),Lt("zoomGestureEnded")),Y=null,K||J||it||W)if(tn(),U||(U=Wn()),U.calculateSwipeSpeed("x"),W){var c=Pn();if(c<a.verticalDragRange)s.close();else{var h=dt.y,p=at;nn("verticalDrag",0,1,300,i.easing.cubic.out,function(e){dt.y=(s.currItem.initialPosition.y-h)*e+h,Ot((1-p)*e+p),_t()}),Lt("onVerticalDrag",1)}}else{if((G||it)&&0===f){var d=Vn(o,U);if(d)return;o="zoomPointerUp"}if(!it)return"swipe"!==o?void Jn():void (!G&&y>s.currItem.fitRatio&&Xn(U))}},Wn=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){dn.length>1?(e=At()-R+50,t=dn[dn.length-2][r]):(e=At()-q,t=cn[r]),n.lastFlickOffset[r]=ln[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(dt[e]>nt.min[e]?n.backAnimDestination[e]=nt.min[e]:dt[e]<nt.max[e]&&(n.backAnimDestination[e]=nt.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nn("bounceZoomPan"+e,dt[e],n.backAnimDestination[e],t||300,i.easing.sine.out,function(t){dt[e]=t,_t()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,dt[e]+=n.distanceOffset[e])},panAnimLoop:function(){return Gt.zoomPan&&(Gt.zoomPan.raf=D(n.panAnimLoop),n.now=At(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),_t(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05)?(dt.x=Math.round(dt.x),dt.y=Math.round(dt.y),_t(),void Zt("zoomPan")):void 0}};return n},Xn=function(e){return e.calculateSwipeSpeed("y"),nt=s.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(en("zoomPan"),e.lastNow=At(),void e.panAnimLoop())},Vn=function(e,t){var n;it||(mn=h);var r;if("swipe"===e){var o=ln.x-cn.x,u=t.lastFlickDist.x<10;o>sn&&(u||t.lastFlickOffset.x>20)?r=-1:-sn>o&&(u||t.lastFlickOffset.x<-20)&&(r=1)}var f;r&&(h+=r,0>h?(h=a.loop?er()-1:0,f=!0):h>=er()&&(h=a.loop?0:er()-1,f=!0),(!f||a.loop)&&(bt+=r,mt-=r,n=!0));var l,c=yt.x*mt,p=Math.abs(c-bn.x);return n||c>bn.x==t.lastFlickSpeed.x>0?(l=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,l=Math.min(l,400),l=Math.max(l,250)):l=333,mn===h&&(n=!1),it=!0,Lt("mainScrollAnimStart"),nn("mainScroll",bn.x,c,l,i.easing.cubic.out,Ht,function(){tn(),it=!1,mn=-1,(n||mn!==h)&&s.updateCurrItem(),Lt("mainScrollAnimComplete")}),n&&s.updateCurrItem(!0),n},$n=function(e){return 1/tt*e*b},Jn=function(){var e=y,t=Wt(),n=Xt();t>y?e=t:y>n&&(e=n);var r,o=1,u=at;return ut&&!z&&!ft&&t>y?(s.close(),!0):(ut&&(r=function(e){Ot((o-u)*e+u)}),s.zoomTo(e,0,200,i.easing.cubic.out,r),!0)};Tt("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,i){C=e+t,k=e+n,L=e+r,A=i?e+i:""};M=I.pointerEvent,M&&I.touch&&(I.touch=!1),M?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):I.touch?(e("touch","start","move","end","cancel"),_=!0):e("mouse","down","move","up"),v=k+" "+L+" "+A,m=C,M&&!_&&(_=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),s.likelyTouchDevice=_,g[C]=qn,g[k]=Rn,g[L]=zn,A&&(g[A]=g[L]),I.touch&&(m+=" mousedown",v+=" mousemove mouseup",g.mousedown=g[C],g.mousemove=g[k],g.mouseup=g[L]),_||(a.allowPanToNext=!1)}}});var Kn,Qn,Gn,Yn,Zn,er,tr,nr=function(t,n,r,o){Kn&&clearTimeout(Kn),Yn=!0,Gn=!0;var u;t.initialLayout?(u=t.initialLayout,t.initialLayout=null):u=a.getThumbBoundsFn&&a.getThumbBoundsFn(h);var f=r?a.hideAnimationDuration:a.showAnimationDuration,l=function(){Zt("initialZoom"),r?(s.template.removeAttribute("style"),s.bg.removeAttribute("style")):(Ot(1),n&&(n.style.display="block"),i.addClass(e,"pswp--animated-in"),Lt("initialZoom"+(r?"OutEnd":"InEnd"))),o&&o(),Yn=!1};if(!f||!u||void 0===u.x)return Lt("initialZoom"+(r?"Out":"In")),y=t.initialZoomLevel,jt(dt,t.initialPosition),_t(),e.style.opacity=r?0:1,Ot(1),void (f?setTimeout(function(){l()},f):l());var p=function(){var n=c,o=!s.currItem.src||s.currItem.loadError||a.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(y=u.w/t.w,dt.x=u.x,dt.y=u.y-B,s[o?"template":"bg"].style.opacity=.001,_t()),en("initialZoom"),r&&!n&&i.removeClass(e,"pswp--animated-in"),o&&(r?i[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){i.addClass(e,"pswp--animate_opacity")},30)),Kn=setTimeout(function(){if(Lt("initialZoom"+(r?"Out":"In")),r){var s=u.w/t.w,a={x:dt.x,y:dt.y},c=y,h=at,p=function(t){1===t?(y=s,dt.x=u.x,dt.y=u.y-F):(y=(s-c)*t+c,dt.x=(u.x-a.x)*t+a.x,dt.y=(u.y-F-a.y)*t+a.y),_t(),o?e.style.opacity=1-t:Ot(h-t*h)};n?nn("initialZoom",0,1,f,i.easing.cubic.out,p,l):(p(1),Kn=setTimeout(l,f+20))}else y=t.initialZoomLevel,jt(dt,t.initialPosition),_t(),Ot(1),o?e.style.opacity=1:Ot(1),Kn=setTimeout(l,f+20)},r?25:90)};p()},rr={},ir=[],sr={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Qn.length}},or=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},ur=function(e,t,n){var r=e.bounds;r.center.x=Math.round((rr.x-t)/2),r.center.y=Math.round((rr.y-n)/2)+e.vGap.top,r.max.x=t>rr.x?Math.round(rr.x-t):r.center.x,r.max.y=n>rr.y?Math.round(rr.y-n)+e.vGap.top:r.center.y,r.min.x=t>rr.x?0:r.center.x,r.min.y=n>rr.y?e.vGap.top:r.center.y},ar=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),Lt("parseVerticalMargin",e)),rr.x=t.x,rr.y=t.y-e.vGap.top-e.vGap.bottom,r){var i=rr.x/e.w,s=rr.y/e.h;e.fitRatio=s>i?i:s;var o=a.scaleMode;"orig"===o?n=1:"fit"===o&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=or())}if(!n)return;return ur(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=or(),e.initialPosition=e.bounds.center,e.bounds},fr=function(e,t,n,r,i,o){t.loadError||r&&(t.imageAppended=!0,hr(t,r,t===s.currItem&&xt),n.appendChild(r),o&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},lr=function(e){e.loading=!0,e.loaded=!1;var t=e.img=i.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},cr=function(e,t){return e.src&&e.loadError&&e.container?(t&&(e.container.innerHTML=""),e.container.innerHTML=a.errorMsg.replace("%url%",e.src),!0):void 0},hr=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),i=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=i+"px"),t.style.width=r+"px",t.style.height=i+"px"}},pr=function(){if(ir.length){for(var e,t=0;t<ir.length;t++)e=ir[t],e.holder.index===e.index&&fr(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);ir=[]}};Tt("Controller",{publicMethods:{lazyLoadItem:function(e){e=Nt(e);var t=Zn(e);t&&(!t.loaded&&!t.loading||x)&&(Lt("gettingData",e,t),t.src&&lr(t))},initController:function(){i.extend(a,sr,!0),s.items=Qn=n,Zn=s.getItemAt,er=a.getNumItemsFn,tr=a.loop,er()<3&&(a.loop=!1),kt("beforeChange",function(e){var t,n=a.preload,r=null===e?!0:e>=0,i=Math.min(n[0],er()),o=Math.min(n[1],er());for(t=1;(r?o:i)>=t;t++)s.lazyLoadItem(h+t);for(t=1;(r?i:o)>=t;t++)s.lazyLoadItem(h-t)}),kt("initialLayout",function(){s.currItem.initialLayout=a.getThumbBoundsFn&&a.getThumbBoundsFn(h)}),kt("mainScrollAnimComplete",pr),kt("initialZoomInEnd",pr),kt("destroy",function(){for(var e,t=0;t<Qn.length;t++)e=Qn[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);ir=null})},getItemAt:function(e){return e>=0&&void 0!==Qn[e]?Qn[e]:!1},allowProgressiveImg:function(){return a.forceProgressiveLoading||!_||a.mouseUsed||screen.width>1200},setContent:function(e,t){a.loop&&(t=Nt(t));var n=s.getItemAt(e.index);n&&(n.container=null);var r,o=s.getItemAt(t);if(!o)return void (e.el.innerHTML="");Lt("gettingData",t,o),e.index=t,e.item=o;var u=o.container=i.createEl("pswp__zoom-wrap");if(!o.src&&o.html&&(o.html.tagName?u.appendChild(o.html):u.innerHTML=o.html),cr(o),ar(o,vt),!o.src||o.loadError||o.loaded)o.src&&!o.loadError&&(r=i.createEl("pswp__img","img"),r.style.opacity=1,r.src=o.src,hr(o,r),fr(t,o,u,r,!0));else{if(o.loadComplete=function(n){if(f){if(e&&e.index===t){if(cr(n,!0))return n.loadComplete=n.img=null,ar(n,vt),Dt(n),void (e.index===h&&s.updateCurrZoomItem());n.imageAppended?!Yn&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):I.transform&&(it||Yn)?ir.push({item:n,baseDiv:u,img:n.img,index:t,holder:e,clearPlaceholder:!0}):fr(t,n,u,n.img,it||Yn,!0)}n.loadComplete=null,n.img=null,Lt("imageLoadComplete",t,n)}},i.features.transform){var l="pswp__img pswp__img--placeholder";l+=o.msrc?"":" pswp__img--placeholder--blank";var c=i.createEl(l,o.msrc?"img":"");o.msrc&&(c.src=o.msrc),hr(o,c),u.appendChild(c),o.placeholder=c}o.loading||lr(o),s.allowProgressiveImg()&&(!Gn&&I.transform?ir.push({item:o,baseDiv:u,img:o.img,index:t,holder:e}):fr(t,o,u,o.img,!0,!0))}Gn||t!==h?Dt(o):(rt=u.style,nr(o,r||o.img)),e.el.innerHTML="",e.el.appendChild(u)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var dr,vr={},mr=function(e,t,n){var r=document.createEvent("CustomEvent"),i={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,i),e.target.dispatchEvent(r)};Tt("Tap",{publicMethods:{initTap:function(){kt("firstTouchStart",s.onTapStart),kt("touchRelease",s.onTapRelease),kt("destroy",function(){vr={},dr=null})},onTapStart:function(e){e.length>1&&(clearTimeout(dr),dr=null)},onTapRelease:function(e,t){if(t&&!K&&!$&&!Yt){var n=t;if(dr&&(clearTimeout(dr),dr=null,xn(n,vr)))return void Lt("doubleTap",n);if("mouse"===t.type)return void mr(e,t,"mouse");var r=e.target.tagName.toUpperCase();if("BUTTON"===r||i.hasClass(e.target,"pswp__single-tap"))return void mr(e,t);jt(vr,n),dr=setTimeout(function(){mr(e,t),dr=null},300)}}}});var gr;Tt("DesktopZoom",{publicMethods:{initDesktopZoom:function(){j||(_?kt("mouseUsed",function(){s.setupDesktopZoom()}):s.setupDesktopZoom(!0))},setupDesktopZoom:function(t){gr={};var n="wheel mousewheel DOMMouseScroll";kt("bindEvents",function(){i.bind(e,n,s.handleMouseWheel)}),kt("unbindEvents",function(){gr&&i.unbind(e,n,s.handleMouseWheel)}),s.mouseZoomedIn=!1;var r,o=function(){s.mouseZoomedIn&&(i.removeClass(e,"pswp--zoomed-in"),s.mouseZoomedIn=!1),1>y?i.addClass(e,"pswp--zoom-allowed"):i.removeClass(e,"pswp--zoom-allowed"),u()},u=function(){r&&(i.removeClass(e,"pswp--dragging"),r=!1)};kt("resize",o),kt("afterChange",o),kt("pointerDown",function(){s.mouseZoomedIn&&(r=!0,i.addClass(e,"pswp--dragging"))}),kt("pointerUp",u),t||o()},handleMouseWheel:function(e){if(y<=s.currItem.fitRatio)return a.modal&&(!a.closeOnScroll||Yt||V?e.preventDefault():O&&Math.abs(e.deltaY)>2&&(c=!0,s.close())),!0;if(e.stopPropagation(),gr.x=0,"deltaX"in e)1===e.deltaMode?(gr.x=18*e.deltaX,gr.y=18*e.deltaY):(gr.x=e.deltaX,gr.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(gr.x=-0.16*e.wheelDeltaX),e.wheelDeltaY?gr.y=-0.16*e.wheelDeltaY:gr.y=-0.16*e.wheelDelta;else{if(!("detail"in e))return;gr.y=e.detail}zt(y,!0);var t=dt.x-gr.x,n=dt.y-gr.y;(a.modal||t<=nt.min.x&&t>=nt.max.x&&n<=nt.min.y&&n>=nt.max.y)&&e.preventDefault(),s.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:vt.x/2+gt.x,y:vt.y/2+gt.y};var n=a.getDoubleTapZoom(!0,s.currItem),r=y===n;s.mouseZoomedIn=!r,s.zoomTo(r?s.currItem.initialZoomLevel:n,t,333),i[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var yr,br,wr,Er,Sr,xr,Tr,Nr,Cr,kr,Lr,Ar,Or={history:!0,galleryUID:1},Mr=function(){return Lr.hash.substring(1)},_r=function(){yr&&clearTimeout(yr),wr&&clearTimeout(wr)},Dr=function(){var e=Mr(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var i=r[n].split("=");i.length<2||(t[i[0]]=i[1])}if(a.galleryPIDs){var s=t.pid;for(t.pid=0,n=0;n<Qn.length;n++)if(Qn[n].pid===s){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Pr=function(){if(wr&&clearTimeout(wr),Yt||V)return void (wr=setTimeout(Pr,500));Er?clearTimeout(br):Er=!0;var e=h+1,t=Zn(h);t.hasOwnProperty("pid")&&(e=t.pid);var n=Tr+"&gid="+a.galleryUID+"&pid="+e;Nr||-1===Lr.hash.indexOf(n)&&(kr=!0);var r=Lr.href.split("#")[0]+"#"+n;Ar?"#"+n!==window.location.hash&&history[Nr?"replaceState":"pushState"]("",document.title,r):Nr?Lr.replace(r):Lr.hash=n,Nr=!0,br=setTimeout(function(){Er=!1},60)};Tt("History",{publicMethods:{initHistory:function(){if(i.extend(a,Or,!0),a.history){Lr=window.location,kr=!1,Cr=!1,Nr=!1,Tr=Mr(),Ar="pushState"in history,Tr.indexOf("gid=")>-1&&(Tr=Tr.split("&gid=")[0],Tr=Tr.split("?gid=")[0]),kt("afterChange",s.updateURL),kt("unbindEvents",function(){i.unbind(window,"hashchange",s.onHashChange)});var e=function(){xr=!0,Cr||(kr?history.back():Tr?Lr.hash=Tr:Ar?history.pushState("",document.title,Lr.pathname+Lr.search):Lr.hash=""),_r()};kt("unbindEvents",function(){c&&e()}),kt("destroy",function(){xr||e()}),kt("firstUpdate",function(){h=Dr().pid});var t=Tr.indexOf("pid=");t>-1&&(Tr=Tr.substring(0,t),"&"===Tr.slice(-1)&&(Tr=Tr.slice(0,-1))),setTimeout(function(){f&&i.bind(window,"hashchange",s.onHashChange)},40)}},onHashChange:function(){return Mr()===Tr?(Cr=!0,void s.close()):void (Er||(Sr=!0,s.goTo(Dr().pid),Sr=!1))},updateURL:function(){_r(),Sr||(Nr?yr=setTimeout(Pr,800):Pr())}}}),i.extend(s,rn)};return e}),!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E=this,S=!1,x=!0,T=!0,N={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},C=function(e){if(g)return!0;e=e||window.event,m.timeToIdle&&m.mouseUsed&&!l&&B();for(var n,r,i=e.target||e.srcElement,s=i.getAttribute("class")||"",o=0;o<W.length;o++)n=W[o],n.onTap&&s.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),g=!0;var u=t.features.isOldAndroid?600:30;y=setTimeout(function(){g=!1},u)}},k=function(){return!e.likelyTouchDevice||m.mouseUsed||screen.width>m.fitControlsWidth},L=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},A=function(){var e=1===m.getNumItemsFn();e!==v&&(L(r,"ui--one-slide",e),v=e)},O=function(){L(a,"share-modal--hidden",T)},M=function(){return T=!T,T?(t.removeClass(a,"pswp__share-modal--fade-in"),setTimeout(function(){T&&O()},300)):(O(),setTimeout(function(){T||t.addClass(a,"pswp__share-modal--fade-in")},30)),T||D(),!1},_=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),n.href?n.hasAttribute("download")?!0:(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),T||M(),!1):!1},D=function(){for(var e,t,n,r,i,s="",o=0;o<m.shareButtons.length;o++)e=m.shareButtons[o],n=m.getImageURLForShare(e),r=m.getPageURLForShare(e),i=m.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(r)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(i)),s+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",m.parseShareButtonOut&&(s=m.parseShareButtonOut(e,s));a.children[0].innerHTML=s,a.children[0].onclick=_},P=function(e){for(var n=0;n<m.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+m.closeElClasses[n]))return!0},H=0,B=function(){clearTimeout(w),H=0,l&&E.setIdle(!1)},j=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(w),w=setTimeout(function(){E.setIdle(!0)},m.timeToIdleOutside))},F=function(){m.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=E.getFullscreenAPI()),n?(t.bind(document,n.eventK,E.updateFullscreen),E.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},I=function(){m.preloaderEl&&(q(!0),c("beforeChange",function(){clearTimeout(d),d=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&q(!1):q(!0)},m.loadingIndicatorDelay)}),c("imageLoadComplete",function(t,n){e.currItem===n&&q(!0)}))},q=function(e){p!==e&&(L(h,"preloader--active",!e),p=e)},R=function(e){var n=e.vGap;if(k()){var o=m.barsSize;if(m.captionEl&&"auto"===o.bottom)if(s||(s=t.createEl("pswp__caption pswp__caption--fake"),s.appendChild(t.createEl("pswp__caption__center")),r.insertBefore(s,i),t.addClass(r,"pswp__ui--fit")),m.addCaptionHTMLFn(e,s,!0)){var u=s.clientHeight;n.bottom=parseInt(u,10)||44}else n.bottom=o.top;else n.bottom="auto"===o.bottom?0:o.bottom;n.top=o.top}else n.top=n.bottom=0},U=function(){m.timeToIdle&&c("mouseUsed",function(){t.bind(document,"mousemove",B),t.bind(document,"mouseout",j),b=setInterval(function(){H++,2===H&&E.setIdle(!0)},m.timeToIdle/2)})},z=function(){c("onVerticalDrag",function(e){x&&.95>e?E.hideControls():!x&&e>=.95&&E.showControls()});var e;c("onPinchClose",function(t){x&&.9>t?(E.hideControls(),e=!0):e&&!x&&t>.9&&E.showControls()}),c("zoomGestureEnded",function(){e=!1,e&&!x&&E.showControls()})},W=[{name:"caption",option:"captionEl",onInit:function(e){i=e}},{name:"share-modal",option:"shareEl",onInit:function(e){a=e},onTap:function(){M()}},{name:"button--share",option:"shareEl",onInit:function(e){u=e},onTap:function(){M()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){o=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){h=e}}],X=function(){var e,n,i,s=function(r){if(r)for(var s=r.length,o=0;s>o;o++){e=r[o],n=e.className;for(var u=0;u<W.length;u++)i=W[u],n.indexOf("pswp__"+i.name)>-1&&(m[i.option]?(t.removeClass(e,"pswp__element--disabled"),i.onInit&&i.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};s(r.children);var o=t.getChildByClass(r,"pswp__top-bar");o&&s(o.children)};E.init=function(){t.extend(e.options,N,!0),m=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),c=e.listen,z(),c("beforeChange",E.update),c("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(m.getDoubleTapZoom(!1,e.currItem),t,333)}),c("preventDragEvent",function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)}),c("bindEvents",function(){t.bind(r,"pswpTap click",C),t.bind(e.scrollWrap,"pswpTap",E.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",E.onMouseOver)}),c("unbindEvents",function(){T||M(),b&&clearInterval(b),t.unbind(document,"mouseout",j),t.unbind(document,"mousemove",B),t.unbind(r,"pswpTap click",C),t.unbind(e.scrollWrap,"pswpTap",E.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",E.onMouseOver),n&&(t.unbind(document,n.eventK,E.updateFullscreen),n.isFullscreen()&&(m.hideAnimationDuration=0,n.exit()),n=null)}),c("destroy",function(){m.captionEl&&(s&&r.removeChild(s),t.removeClass(i,"pswp__caption--empty")),a&&(a.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),E.setIdle(!1)}),m.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),c("initialZoomIn",function(){m.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")}),c("initialZoomOut",function(){t.addClass(r,"pswp__ui--hidden")}),c("parseVerticalMargin",R),X(),m.shareEl&&u&&a&&(T=!0),A(),U(),F(),I()},E.setIdle=function(e){l=e,L(r,"ui--idle",e)},E.update=function(){x&&e.currItem?(E.updateIndexIndicator(),m.captionEl&&(m.addCaptionHTMLFn(e.currItem,i),L(i,"caption--empty",!e.currItem.title)),S=!0):S=!1,T||M(),A()},E.updateFullscreen=function(r){r&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},E.updateIndexIndicator=function(){m.counterEl&&(o.innerHTML=e.getCurrentIndex()+1+m.indexIndicatorSep+m.getNumItemsFn())},E.onGlobalTap=function(n){n=n||window.event;var r=n.target||n.srcElement;if(!g)if(n.detail&&"mouse"===n.detail.pointerType){if(P(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?m.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(m.tapToToggleControls&&(x?E.hideControls():E.showControls()),m.tapToClose&&(t.hasClass(r,"pswp__img")||P(r)))return void e.close()},E.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;L(r,"ui--over-close",P(t))},E.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),x=!1},E.showControls=function(){x=!0,S||E.update(),t.removeClass(r,"pswp__ui--hidden")},E.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},E.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return f=m.closeOnScroll,m.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return m.closeOnScroll=f,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e}),function(){"use strict";window.od__channel=window.od__channel||[function(e){console.log("initializing opendesk.channel");var t=e.module("opendesk.channel",["opendesk.common.marketplace.models","opendesk.common.marketplace.api"]);return t.name}]}(),function(){window.od__channel.push(function(e){var t;return t=e.module("opendesk.channel")
,t.service("QueryString",["$window",function(e){var t,n;return t=function(t){return e.decodeURIComponent(t)},n=function(){var n,r,i,s,o,u,a,f,l;a=e.location.search.substr(1),u=a.split("&"),o={};for(n=0,i=u.length;n<i;n++)s=u[n],f=s.split("="),r=f[0],l=f[1],o[t(r)]=t(l);return o},{parse:n}}])})}.call(this),function(){window.od__channel.push(function(e){var t,n,r,i,s,o,u;return u=e.module("opendesk.channel"),n="product-configuration:activate",s="product-configuration:select",r="product-configuration:cost-change",i="product-configuration:cost",u.directive("productConfigurationChoices",function(){return{controller:["$scope","$attrs","$window","Cost","Session","GeoSegment","$q","QueryString",function(t,r,o,u,a,f,l,c){var h,p,d,v,m,g,y,b,w;return p=o[r.configurationKey],v=o[r.fallbackKey],d=l.defer(),m=l.defer(),g={ready:!1,configurations:[],active:null},a.load().then(function(){return u.load(p,v.product).then(function(t){return e.forEach(p,function(e){var n;n=t[e.id];if(n)return e.cost=n}),d.resolve(t)})}),t.$on(f.resolvedEvent,function(e,t){return m.resolve(t)}),t.productConfiguration=g,b=function(e){return g.active=e,t.$broadcast(n,e)},w=function(e){var t,n,r,i;if(!e)return;i=[];for(n=0,r=p.length;n<r;n++)t=p[n],t.id===e?i.push(b(t)):i.push(void 0);return i},t.$on(s,function(e,t){return e.stopPropagation(),w(t)}),h=null,y=c.parse(),y&&(h=+y.config_id,o.isNaN(h)&&(h=null)),l.all([d.promise,m.promise]).then(function(e){var n,r,s;return r=e[0],s=e[1],p=s.filter(p,function(e){return e.geo_segments}),n=p[0],p.length===0&&(n=v),g.configurations=p,b(n),t.productConfiguration.ready=!0,t.$broadcast(i,r),w(h)})}]}}),u.directive("activeConfiguration",function(){return{require:"^^productConfigurationChoices",transclude:!0,template:'<span ng-show="configuration()" ng-transclude></span>',controller:["$scope",function(e){var t;return t=null,e.configuration=function(){return t},e.$on(n,function(e,n){return t=n})}]}}),u.directive("productConfigurationChoice",function(){return{link:function(e,t,n){return t.on("click",function(t){return t.preventDefault(),e.$emit(s,+n.configurationId)})}}}),u.directive("productConfigurationPrice",function(){return{require:"^^productConfigurationChoices",transclude:!0,template:"<span ng-transclude></span>",controller:["$scope",function(e){var t,s,o,u;return s=null,t=null,o=!1,e.hasPrice=function(){return o},u=function(){var n;n=null,s&&t&&(n=s[t.id]);if(n)return e.$broadcast(r,n),o=!0},e.$on(i,function(e,t){return s=t,u()}),e.$on(n,function(e,n){return t=n,u()})}]}}),u.directive("productConfigurationDisplayPrice",function(){return{scope:!0,controller:["$scope","$attrs",function(e,t){var n;return n=t.productConfigurationDisplayPrice||"bestPrice",e.$on(r,function(t,r){var i;return i=r[n].call(r),e.$broadcast("localised-price:base-price-change",i)})}]}}),u.directive("productConfigurationImage",function(){return{require:"^^productConfigurationChoices",template:'<img ng-src="{{ url() }}" style="opacity: {{ opacity() }}" class="product-lead--product-image">',controller:["$scope","$attrs",function(t,r){var i,s;return i={url:r.placeholder,width:r.placeholderWidth,height:r.placeholderHeight,opacity:1},s={},e.extend(s,i,{opacity:r.loadingOpacity||.5}),t.url=function(){return s.url},t.opacity=function(){return s.opacity},t.$on(n,function(t,n){var r;return r=e.extend({},i,n.image),e.extend(s,r)})}]}}),u.directive("productBasketMode",function(){return{transclude:!0,replace:!0,require:"^^productConfigurationPrice",template:"<span ng-transclude></span>",controller:["$scope","$attrs",function(e,t){return e.purchasable=!1,e.$on(r,function(t,n){if(n.hasPurchasableQuote())return e.purchasable=!0})}]}}),u.directive("productLeadConfigurationImages",function(){return{controller:["$scope",function(e){var t,r,i;return i=null,r=0,t=function(t,n){return r=n,i=t,e.$broadcast("product-configuration-gallery:activate",{id:t,angleIndex:n})},e.$on("product-configuration-gallery:activate-angle",function(e,n){return e.stopPropagation(),t(i,n)}),e.$on(n,function(e,n){return t(n.id,r)})}]}}),t="active",o=function(e,n){return n?e.addClass(t):e.removeClass(t)},u.directive("productLeadConfiguration",function(){return{scope:!0,link:function(e,t){return e.$on("product-configuration-gallery:activate",function(n,r){return o(t,r.id===e.configurationId)})},controller:["$scope","$attrs",function(e,t){var n;return n=+t.configurationId,e.configurationId=n}]}}),u.directive("productLeadConfigurationImage",function(){return{scope:!0,link:function(e,t){return e.$on("product-configuration-gallery:activate",function(n,r){return o(t,r.id===e.configurationId&&r.angleIndex===e.angleIndex)})},controller:["$scope","$attrs",function(e,t){return e.configurationId=+t.configurationId,e.angleIndex=+t.angleIndex}]}}),u.directive("productLeadAngleSelection",function(){return{link:function(e,t,n){var r;return r=+n.angleIndex,t.on("click",function(t){return t.preventDefault(),e.$emit("product-configuration-gallery:activate-angle",r)}),e.$on("product-configuration-gallery:activate",function(e,n){return o(t,n.angleIndex===r)})}}})})}.call(this),function(){window.od__channel.push(function(e){var t,n;return n=e.module("opendesk.channel"),t="campaign-costs:costs-available",n.directive("campaignCosts",function(){return{controller:["$scope","$attrs","$window","Cost","Session","$q","GeoSegment",function(n,r,i,s,o,u,a){var f,l,c,h;return l=i[r.configurationsKey],f=null,c=u.defer(),h=u.defer(),o.load().then(function(){return s.load(l).then(function(t){return e.forEach(l,function(e){var n;n=t[e.id];if(n)return e.cost=n}),c.resolve(t)})}),n.$on(a.resolvedEvent,function(e,t){return h.resolve(t)}),u.all([c.promise,h.promise]).then(function(r){var i,s,o;return s=r[0],o=r[1],i={},e.forEach(o.filter(l,function(e){return e.geo_segments}),function(e){return i[e.product]=e}),n.$broadcast(t,i)})}]}}),n.directive("offeredDesignPrice",function(){return{template:'<span ng-show="purchasable()">\n  <span localised-price display="excludingTax"></span>\n</span>',scope:!0,controller:["$scope","$attrs",function(e,n){var r,i;r=!1,e.purchasable=function(){return r},i=n.path;if(i)return e.$on(t,function(t,n){var s,o,u;o=n[i],s=o.cost;if(s.hasPurchasableQuote())return r=!0,u=s.purchasablePrice(),e.$broadcast("localised-price:base-price-change",u)})}]}})})}.call(this);